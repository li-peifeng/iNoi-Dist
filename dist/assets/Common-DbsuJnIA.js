import{k as _,bd as c,bv as n,bZ as w,cY as C,C as R,E as t,cZ as L,R as I,by as o,x as g,q as x,aJ as T,L as l,c_ as A,ai as Z,c$ as q}from"./index-CPpolQ0D.js";import{f as B}from"./index-CmxKwf-z.js";import{I as D}from"./SettingItem-gU3JJsGV.js";import{R as E}from"./ResponsiveGrid-EKqLZpVz.js";import"./index-DYa0XRTo.js";import"./index-nS81zA5x.js";import"./index-CrnYd-rl.js";import"./item_type-CV3e5W3l.js";const W=u=>{const s=x(),{pathname:y}=_();B("manage.sidemenu.".concat(y().split("/").pop()));const[d,S]=c(()=>n.get("/admin/setting/list?group=".concat(u.group))),[p,i]=w([]),r=async()=>{const e=await S();o(e,i)};r();const[k,b]=c(()=>n.post("/admin/setting/save",C(p))),[m,$]=c(()=>n.post("/admin/setting/default?group=".concat(u.group))),[f,h]=R(!1);return t(Z,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[t(E,{get children(){return t(L,{each:p,children:e=>t(D,I(e,{onChange:a=>{i(v=>e().key===v.key,"value",a)},onDelete:async()=>{h(!0);const a=await n.post("/admin/setting/delete?key=".concat(e().key));h(!1),o(a,()=>{g.success(s("global.delete_success")),r()})}}))})}}),t(T,{spacing:"$2",get children(){return[t(l,{colorScheme:"accent",onClick:r,get loading(){return d()||f()||m()},get children(){return s("global.refresh")}}),t(l,{get loading(){return k()},onClick:async()=>{const e=await b();o(e,async()=>{g.success(s("global.save_success")),A(await n.get("/public/settings"),q)})},get children(){return s("global.save")}}),t(l,{colorScheme:"warning",get loading(){return d()||f()||m()},onClick:async()=>{const e=await $();o(e,a=>{g.info(s("manage.load_default_setting_success")),i(a)})},get children(){return s("manage.load_default_setting")}})]}})]}})};export{W as default};
