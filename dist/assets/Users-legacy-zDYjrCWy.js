System.register(["./index-legacy-lNyWm5Cj.js","./index-legacy-CfVGfNbS.js","./DeletePopover-legacy-Rx25SGlh.js","./Wether-legacy-CnhpFD_W.js"],function(e,r){"use strict";var n,t,c,s,l,a,i,d,u,g,o,h,m,b,p,$,f,y,x,_,k,v,w,C,S,W,j;return{setters:[e=>{n=e.k,t=e.bd,c=e.bv,s=e.C,l=e.da,a=e.E,i=e.aH,d=e.L,u=e.q,g=e.am,o=e.db,h=e.dc,m=e.dd,b=e.U,p=e.de,$=e.df,f=e.dg,y=e.by,x=e.x,_=e.ag,k=e.b3,v=e.aZ,w=e.aY,C=e.aK},e=>{S=e.f},e=>{W=e.D},e=>{j=e.W}],execute:function(){const r=e=>{const r=[{name:"general",color:"info"},{name:"guest",color:"neutral"},{name:"admin",color:"accent"}];return a(k,{get colorScheme(){return r[e.role].color},get children(){return r[e.role].name}})},D=e=>{const r=u();return a(i,{spacing:"$0_5",get children(){return a(b,{each:v,children:(n,t)=>a(w,{get label(){return r(`users.permissions.${n}`)},get children(){return a(g,{boxSize:"$2",rounded:"$full",get bg(){return`$${C.can(e.user,t())?"success":"danger"}9`}})}})})}})};e("default",()=>{const e=u();S("manage.sidemenu.users");const{to:k}=n(),[v,w]=t(()=>c.get("/admin/user/list")),[C,H]=s([]),q=async()=>{const e=await w();y(e,e=>H(e.content))};q();const[z,E]=l(e=>c.post(`/admin/user/delete?id=${e}`)),[I,K]=l(e=>c.post(`/admin/user/cancel_2fa?id=${e}`));return a(_,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[a(i,{spacing:"$2",get children(){return[a(d,{colorScheme:"accent",get loading(){return v()},onClick:q,get children(){return e("global.refresh")}}),a(d,{onClick:()=>{k("/@manage/users/add")},get children(){return e("global.add")}})]}}),a(g,{w:"$full",overflowX:"auto",get children(){return a(o,{highlightOnHover:!0,dense:!0,get children(){return[a(h,{get children(){return a(m,{get children(){return[a(b,{each:["username","base_path","role","permission","available"],children:r=>a(p,{get children(){return e(`users.${r}`)}})}),a(p,{get children(){return e("global.operations")}})]}})}}),a($,{get children(){return a(b,{get each(){return C()},children:n=>a(m,{get children(){return[a(f,{css:{minWidth:"80px"},get children(){return n.username}}),a(f,{css:{minWidth:"100px"},get children(){return n.base_path}}),a(f,{get children(){return a(r,{get role(){return n.role}})}}),a(f,{get children(){return a(D,{user:n})}}),a(f,{css:{minWidth:"80px"},get children(){return a(j,{get yes(){return!n.disabled}})}}),a(f,{get children(){return a(i,{spacing:"$2",get children(){return[a(d,{onClick:()=>{k(`/@manage/users/edit/${n.id}`)},get children(){return e("global.edit")}}),a(W,{get name(){return n.username},get loading(){return z()===n.id},onClick:async()=>{const r=await E(n.id);y(r,()=>{x.success(e("global.delete_success")),q()})}}),a(d,{colorScheme:"accent",get loading(){return I()===n.id},onClick:async()=>{const r=await K(n.id);y(r,()=>{x.success(e("users.cancel_2fa_success")),q()})},get children(){return e("users.cancel_2fa")}})]}})}})]}})})}})]}})}})]}})})}}});
