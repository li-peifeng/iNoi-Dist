import{dd as O,Q as _,k as I,E as t,a7 as m,S as k,dQ as g,b0 as y,aW as P,aM as C,aC as L,a4 as d,r as z,ct as D,cF as T,bV as v,a1 as w,a5 as S,av as W,C as j,D as K,b3 as E,dR as B,dS as R,V as f,q as F,dT as H,W as V,R as G,ah as Q}from"./index-7pUof9sV.js";import{b as q}from"./style-DeGB1Xkz.js";import{o as U}from"./index-mkQzSjrY.js";import{O as x,g as p}from"./icon-DCRRDS1_.js";import{I as $,u as A}from"./helper-6Z8jtop_.js";const r=[{name:"name",textAlign:"left",w:{"@initial":"75%","@md":"50%"}},{name:"size",textAlign:"right",w:{"@initial":"25%","@md":"18%"}},{name:"modified",textAlign:"right",w:{"@initial":0,"@md":"32%"}}],J=e=>{const{isHide:c}=O();if(c(e.obj))return null;const{setPathAs:u}=_(),{show:l}=q({id:1}),{pushHref:a,to:s}=I(),{openWithDoubleClick:o,toggleWithClick:i,restoreSelectionCache:h}=A(),b=()=>z.list_item_filename_overflow;return t(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return t(m,{get classList(){return{selected:!!e.obj.selected}},class:"list-item viselect-item",get"data-index"(){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:w()}},as:U,get href(){return e.obj.name},get cursor(){return o()||i()?"default":"pointer"},get bgColor(){return S(()=>!!e.obj.selected)()?w():void 0},"on:dblclick":()=>{o()&&(g(e.index,!0,!0),s(a(e.obj.name)))},"on:click":n=>{if(n.preventDefault(),!o()&&!(n.ctrlKey||n.metaKey||n.shiftKey)&&h()){if(i())return g(e.index,!e.obj.selected);s(a(e.obj.name))}},onMouseEnter:()=>{u(e.obj.name,e.obj.is_dir,!0)},onContextMenu:n=>{v(()=>{g(e.index,!0,!0)}),l(n,{props:e.obj})},get children(){return[t(m,{class:"name-box",spacing:"$1",get w(){return r[0].w},get children(){return[t(k,{get when(){return y()},get children(){return t($,{"on:mousedown":n=>{n.stopPropagation()},"on:click":n=>{n.stopPropagation()},get checked(){return e.obj.selected},onChange:n=>{g(e.index,n.target.checked)}})}}),t(P,{class:"icon",boxSize:"$6",get color(){return L()},get as(){return p(e.obj)},mr:"$1",get cursor(){return e.obj.type!==x.IMAGE?"inherit":"pointer"},"on:click":n=>{e.obj.type===x.IMAGE&&(n.ctrlKey||n.metaKey||n.shiftKey||h()&&(C.emit("gallery",e.obj.name),n.preventDefault(),n.stopPropagation()))}}),t(d,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:b()==="multi_line"?"unset":"nowrap","overflow-x":b()==="scrollable"?"auto":"hidden",textOverflow:b()==="ellipsis"?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),t(d,{class:"size",get w(){return r[1].w},get textAlign(){return r[1].textAlign},get children(){return D(e.obj.size)}}),t(d,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return r[2].w},get textAlign(){return r[2].textAlign},get children(){return T(e.obj.modified)}})]}})}})},M=e=>{const c=F(),[u,l]=j(),[a,s]=j(!1);K(()=>{u()&&e.sortCallback(u(),a())});const o=i=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:i.textAlign,cursor:"pointer",onClick:()=>{i.name===u()?s(!a()):v(()=>{l(i.name),s(!1)})}});return t(m,{class:"title",w:"$full",p:"$2",get children(){return[t(m,{get w(){return r[0].w},spacing:"$1",get children(){return[t(k,{get when(){return S(()=>!e.disableCheckbox)()&&y()},get children(){return t($,{get checked(){return R()},get indeterminate(){return B()},onChange:i=>{E(i.target.checked)}})}}),t(d,f(()=>o(r[0]),{get children(){return c("home.obj.".concat(r[0].name))}}))]}}),t(d,f({get w(){return r[1].w}},()=>o(r[1]),{get children(){return c("home.obj.".concat(r[1].name))}})),t(d,f({get w(){return r[2].w}},()=>o(r[2]),{display:{"@initial":"none","@md":"inline"},get children(){return c("home.obj.".concat(r[2].name))}}))]}})},N=()=>{const e=l=>{var s,o;const a=Array.from((o=(s=l.dataTransfer)==null?void 0:s.items)!=null?o:[]);for(let i=0;i<a.length;i++)if(a[i].kind==="file"){C.emit("tool","upload"),l.preventDefault();break}},{registerSelectContainer:c,captureContentMenu:u}=A();return c(),t(Q,{onDragOver:e,"oncapture:contextmenu":u,class:"list viselect-container",w:"$full",spacing:"$1",get children(){return[t(M,{sortCallback:H}),t(V,{get each(){return G.objs},children:(l,a)=>t(J,{obj:l,get index(){return a()}})})]}})},ne=Object.freeze(Object.defineProperty({__proto__:null,ListTitle:M,default:N},Symbol.toStringTag,{value:"Module"}));export{M as L,ne as a,r as c};
