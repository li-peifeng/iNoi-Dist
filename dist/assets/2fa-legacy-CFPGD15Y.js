System.register(["./index-legacy-DaL7O5HQ.js"],function(e,r){"use strict";var t,n,a,u,s,c,i,g,o,l,d,f,h,y,p,b,v,x,w,_,k;return{setters:[e=>{t=e.k,n=e.bd,a=e.bv,u=e.C,s=e.E,c=e.S,i=e.ag,g=e.c4,o=e.q,l=e.aI,d=e.af,f=e.ae,h=e.aB,y=e.I,p=e.L,b=e.an,v=e.aL,x=e.x,w=e.by,_=e.bf,k=e.de}],execute:function(){e("default",()=>{const{back:e}=t(),[r,m]=n(()=>a.post("/auth/2fa/generate")),I=o(),[$,q]=u(),[S,C]=u("");(async()=>{if(v().otp)return x.warning(I("users.2fa_already_enabled")),void e();const r=await m();w(r,q)})();const[E,L]=n(()=>a.post("/auth/2fa/verify",{code:S(),secret:$()?.secret})),j=async()=>{const r=await L();_(r,()=>{k({...v(),otp:!0}),e()})};return s(b,{get loading(){return r()},get children(){return s(c,{get when(){return $()},get children(){return s(i,{spacing:"$2",alignItems:"start",get children(){return[s(g,{get children(){return I("users.scan_qr")}}),s(l,{boxSize:"$xs",rounded:"$lg",get src(){return $()?.qr}}),s(g,{get children(){return[d(()=>I("users.or_manual")),":"," ",s(f,{get color(){return h()},get children(){return $()?.secret}})]}}),s(y,{maxW:"$xs",get placeholder(){return I("users.input_code")},get value(){return S()},onInput:e=>C(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&j()}}),s(p,{get loading(){return E()},onClick:j,get children(){return I("users.verify")}})]}})}})}})})}}});
