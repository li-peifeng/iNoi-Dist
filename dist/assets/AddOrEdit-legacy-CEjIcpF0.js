System.register(["./index-legacy-BDeHuhEG.js","./share-legacy-D_jYX2DT.js","./item_type-legacy-NfhfVKtF.js","./ResponsiveGrid-legacy-DoPYWRbn.js","./index-legacy-ChPSMcE2.js"],function(e,r){"use strict";var t,n,a,u,l,g,i,d,o,c,s,h,v,p,y,m,b,x,C,f,w,S,_,T,k,$,O,I,j,N,q;return{setters:[e=>{t=e.E,n=e.bI,a=e.q,u=e.a6,l=e.a7,g=e.aH,i=e.I,d=e.S,o=e.aw,c=e.af,s=e.bU,h=e.T,v=e.bJ,p=e.b_,y=e.aO,m=e.bV,b=e.k,x=e.bd,C=e.bv,f=e.bZ,w=e.C,S=e.c4,_=e.L,T=e.by,k=e.x,$=e.an,O=e.bX},e=>{I=e.r},e=>{j=e.T},e=>{N=e.R},e=>{q=e.i}],execute:function(){const r=e=>{const r=a();return t(m,{w:"$full",display:"flex",flexDirection:"column",get required(){return e.required},get children(){return[t(n,{get for(){return e.name},display:"flex",alignItems:"center",get children(){return r(e.full_name_path??`shares.${e.name}`)}}),t(u,{get fallback(){return t(y,{get children(){return r("settings.unknown_type")}})},get children(){return[t(l,{get when(){return e.type===j.String},get children(){return t(g,{w:"$full",spacing:"$2",get children(){return[t(i,{get id(){return e.name},type:"text",get readOnly(){return e.readonly},get value(){return e.value},get invalid(){return!e.valid},get onChange(){return e.type===j.String?r=>e.onChange?.(r.currentTarget.value):void 0}}),t(d,{get when(){return c(()=>e.type===j.String)()&&e.random},get children(){return t(o,{colorScheme:"neutral","aria-label":"random",get icon(){return t(q,{})},get onClick(){return e.type===j.String?()=>e.onChange?.(e.random()):void 0}})}})]}})}}),t(l,{get when(){return e.type===j.Number},get children(){return t(i,{type:"number",get id(){return e.name},get readOnly(){return e.readonly},get value(){return e.value},get invalid(){return!e.valid},get onInput(){return e.type===j.Number?r=>e.onChange?.(parseInt(r.currentTarget.value)):void 0}})}}),t(l,{get when(){return e.type===j.Float},get children(){return t(i,{type:"number",get id(){return e.name},get readOnly(){return e.readonly},get value(){return e.value},get invalid(){return!e.valid},get onInput(){return e.type===j.Float?r=>e.onChange?.(parseFloat(r.currentTarget.value)):void 0}})}}),t(l,{get when(){return e.type===j.Bool},get children(){return t(s,{get id(){return e.name},get readOnly(){return e.readonly},get defaultChecked(){return e.value},get invalid(){return!e.valid},get onChange(){return e.type===j.Bool?r=>e.onChange?.(r.currentTarget.checked):void 0}})}}),t(l,{get when(){return e.type===j.Text},get children(){return t(h,{get id(){return e.name},get readOnly(){return e.readonly},get value(){return e.value},get invalid(){return!e.valid},get onChange(){return e.type===j.Text?r=>e.onChange?.(r.currentTarget.value):void 0}})}}),t(l,{get when(){return e.type===j.Select},get children(){return t(v,{get id(){return e.name},get readOnly(){return e.readonly},get value(){return e.value},get invalid(){return!e.valid},get onChange(){return e.type===j.Select?r=>e.onChange?.(r):void 0},get children(){return t(p,{get readonly(){return e.readonly},get searchable(){return c(()=>e.type===j.Select)()&&e.searchable},get options(){return e.options.split(",").map(t=>({key:t,label:r((e.options_prefix??`shares.${e.name}s`)+`.${t}`)}))}})}})}})]}})]}})};e("default",()=>{const e=a(),{params:n,back:u,to:l}=b(),{id:g}=n,[i,o]=x(()=>C.get(`/share/get?id=${g}`),!0),[c,s]=f({}),[h,v]=w(""),[p,y]=w(!1),[m,q]=w(""),[D,F]=w(!0);g&&(async()=>{const e=await o();T(e,e=>{O(()=>{s(e),v(e.files.join("\n")),e.expires&&q(new Date(e.expires).toLocaleString()),y(!0)})})})();const[B,L]=x(()=>C.post("/share/"+(g?"update":"create"),c));return t($,{get loading(){return!!g&&i()},get children(){return[t(S,{mb:"$2",get children(){return e("global."+(g?"edit":"add"))}}),t(N,{get children(){return[t(d,{when:g,get children(){return t(r,{name:"id",get type(){return j.String},value:g,valid:!0,readonly:!0})}}),t(r,{name:"files",get type(){return j.Text},get value(){return h()},get valid(){return p()},required:!0,onChange:e=>{v(e),y(e.length>0),s("files",e.split("\n"))}}),t(r,{name:"remark",get type(){return j.Text},get value(){return c.remark},valid:!0,onChange:e=>{s("remark",e)}}),t(r,{name:"extract_folder",get type(){return j.Select},get value(){return c.extract_folder},valid:!0,options:"front,back",onChange:e=>{s("extract_folder",e)}}),t(r,{name:"order_by",get type(){return j.Select},get value(){return c.order_by},valid:!0,options:"name,size,modified",onChange:e=>{s("order_by",e)}}),t(r,{name:"order_direction",get type(){return j.Select},get value(){return c.order_direction},valid:!0,options:"asc,desc",onChange:e=>{s("order_direction",e)}}),t(r,{name:"pwd",get type(){return j.String},get value(){return c.pwd},valid:!0,onChange:e=>{s("pwd",e)},random:I}),t(r,{name:"max_accessed",get type(){return j.Number},get value(){return c.max_accessed},valid:!0,onChange:e=>{s("max_accessed",e)}}),t(d,{when:g,get children(){return t(r,{name:"accessed",get type(){return j.Number},get value(){return c.accessed},valid:!0,onChange:e=>{s({...c,accessed:e})}})}}),t(r,{name:"expires",get type(){return j.String},get value(){return m()},get valid(){return D()},onChange:e=>{if(q(e),""===e)return F(!0),void s("expires",null);const r=new Date(e);isNaN(r.getTime())?F(!1):(F(!0),s("expires",r.toISOString()))}}),t(r,{name:"readme",get type(){return j.Text},get value(){return c.readme},valid:!0,onChange:e=>{s("readme",e)}}),t(r,{name:"header",get type(){return j.Text},get value(){return c.header},valid:!0,onChange:e=>{s("header",e)}})]}}),t(_,{mt:"$2",get disabled(){return!D()||!p()},get loading(){return B()},onClick:async()=>{const r=await L();T(r,()=>{k.success(e("global.save_success")),u()},(e,t)=>{r.data.id&&l(`/@manage/shares/edit/${r.data.id}`)})},get children(){return e("global."+(g?"save":"add"))}})]}})})}}});
