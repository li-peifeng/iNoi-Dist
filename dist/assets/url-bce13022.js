import{dP as j,G as S,dQ as $,b as I,y as p,D as w,ah as T}from"./index-7890fb03.js";import{F as W}from"./File-32dc98cf.js";import"./icon-4e427734.js";import"./Layout-b1841a73.js";import"./index-bba8df9a.js";import"./index-a9023df3.js";import"./FolderTree-ec65a72e.js";import"./index-540119f3.js";import"./index-73d5cb9c.js";import"./index-dc98d6c6.js";const{hasOwnProperty:A}=Object.prototype,_=(e,t={})=>{typeof t=="string"&&(t={section:t}),t.align=t.align===!0,t.newline=t.newline===!0,t.sort=t.sort===!0,t.whitespace=t.whitespace===!0||t.align===!0,t.platform=t.platform||typeof process<"u"&&process.platform,t.bracketedArray=t.bracketedArray!==!1;const s=t.platform==="win32"?"\r\n":"\n",r=t.whitespace?" = ":"=",c=[],o=t.sort?Object.keys(e).sort():Object.keys(e);let h=0;t.align&&(h=d(o.filter(n=>e[n]===null||Array.isArray(e[n])||typeof e[n]!="object").map(n=>Array.isArray(e[n])?"".concat(n,"[]"):n).concat([""]).reduce((n,i)=>d(n).length>=d(i).length?n:i)).length);let a="";const y=t.bracketedArray?"[]":"";for(const n of o){const i=e[n];if(i&&Array.isArray(i))for(const l of i)a+=d("".concat(n).concat(y)).padEnd(h," ")+r+d(l)+s;else i&&typeof i=="object"?c.push(n):a+=d(n).padEnd(h," ")+r+d(i)+s}t.section&&a.length&&(a="["+d(t.section)+"]"+(t.newline?s+s:s)+a);for(const n of c){const i=O(n,".").join("\\."),l=(t.section?t.section+".":"")+i,u=_(e[n],{...t,section:l});a.length&&u.length&&(a+=s),a+=u}return a};function O(e,t){var s=0,r=0,c=0,o=[];do if(c=e.indexOf(t,s),c!==-1){if(s=c+t.length,c>0&&e[c-1]==="\\")continue;o.push(e.slice(r,c)),r=c+t.length}while(c!==-1);return o.push(e.slice(r)),o}const b=(e,t={})=>{t.bracketedArray=t.bracketedArray!==!1;const s=Object.create(null);let r=s,c=null;const o=/^\[([^\]]*)\]\s*$|^([^=]+)(=(.*))?$/i,h=e.split(/[\r\n]+/g),a={};for(const n of h){if(!n||n.match(/^\s*[;#]/)||n.match(/^\s*$/))continue;const i=n.match(o);if(!i)continue;if(i[1]!==void 0){if(c=m(i[1]),c==="__proto__"){r=Object.create(null);continue}r=s[c]=s[c]||Object.create(null);continue}const l=m(i[2]);let u;t.bracketedArray?u=l.length>2&&l.slice(-2)==="[]":(a[l]=((a==null?void 0:a[l])||0)+1,u=a[l]>1);const f=u&&l.endsWith("[]")?l.slice(0,-2):l;if(f==="__proto__")continue;const g=i[3]?m(i[4]):!0,k=g==="true"||g==="false"||g==="null"?JSON.parse(g):g;u&&(A.call(r,f)?Array.isArray(r[f])||(r[f]=[r[f]]):r[f]=[]),Array.isArray(r[f])?r[f].push(k):r[f]=k}const y=[];for(const n of Object.keys(s)){if(!A.call(s,n)||typeof s[n]!="object"||Array.isArray(s[n]))continue;const i=O(n,".");r=s;const l=i.pop(),u=l.replace(/\\\./g,".");for(const f of i)f!=="__proto__"&&((!A.call(r,f)||typeof r[f]!="object")&&(r[f]=Object.create(null)),r=r[f]);r===s&&u===l||(r[u]=s[n],y.push(n))}for(const n of y)delete s[n];return s},x=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"),d=e=>typeof e!="string"||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&x(e)||e!==e.trim()?JSON.stringify(e):e.split(";").join("\\;").split("#").join("\\#"),m=e=>{if(e=(e||"").trim(),x(e)){e.charAt(0)==="'"&&(e=e.slice(1,-1));try{e=JSON.parse(e)}catch(t){}}else{let t=!1,s="";for(let r=0,c=e.length;r<c;r++){const o=e.charAt(r);if(t)"\\;#".indexOf(o)!==-1?s+=o:s+="\\"+o,t=!1;else{if(";#".indexOf(o)!==-1)break;o==="\\"?t=!0:s+=o}}return t&&(s+="\\"),s.trim()}return e};var C={parse:b,decode:b,stringify:_,encode:_,safe:d,unsafe:m};function D(){const[e]=j(),{copy:t}=useUtil(),s=S(()=>{var c,o;try{const h=((c=e())==null?void 0:c.content)||"",{text:a}=$(h);return((o=recordKeysToLowerCase(C.parse(a()||"")).internetshortcut)==null?void 0:o.url)||"#"}catch(h){return console.error("Error parsing INI content:",h),"#"}}),r=I();return p(T,{get loading(){return e.loading},get children(){return p(W,{get children(){return[p(w,{colorScheme:"accent",onClick:()=>t(s()),get children(){return r("home.toolbar.copy_link")}}),p(w,{as:"a",get href(){return s()},target:"_blank",rel:"noopener noreferrer",get children(){return r("home.preview.open_in_new_window")}})]}})}})}export{D as default};
