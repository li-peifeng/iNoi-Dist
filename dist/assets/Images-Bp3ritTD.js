import{bY as j,Q as k,E as e,aB as m,aX as C,ak as I,ag as x,aO as _,S as o,dX as l,b1 as y,aM as h,aJ as M,bX as v,au as S,P as E,U as b,a9 as f,d1 as G,am as L,ae as O,e2 as P,r as g,c3 as W,c4 as z,q as A}from"./index-CIhEx_5u.js";import{b as B}from"./style-DBxWzmnI.js";import{I as F}from"./ImageWithError-S8CKJSnz.js";import{O as w}from"./obj-H61i4oAB.js";import{g as K}from"./icon-DF7SW9Yy.js";import{I as T,u as $}from"./helper-DpS6Yozg.js";import{G as X}from"./GridItem-RZG234b0.js";import"./Layout-CXhLEEOk.js";import"./index-_heXIZnM.js";import"./index-959KdukI.js";import"./FolderTree-BdzTu4ZB.js";import"./index-CDqBF-gh.js";import"./index-Bx25HCXr.js";import"./share-UtWCBk6H.js";import"./icons-DgAtrmS0.js";import"./index-R-xgB55m.js";const H=t=>{const{isHide:s}=j();if(s(t.obj)||t.obj.type!==w.IMAGE)return null;const{setPathAs:i}=k(),c=e(C,{get color(){return m()},boxSize:"$12",get as(){return K(t.obj)}}),{show:u}=B({id:1}),{rawLink:n}=I(),{openWithDoubleClick:a,toggleWithClick:d,restoreSelectionCache:p}=$();return e(S.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{"flex-grow":1},get children(){return e(x,{w:"$full",get classList(){return{selected:!!t.obj.selected}},class:"image-item viselect-item",get"data-index"(){return t.index},p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",border:"2px solid transparent",get _hover(){return{border:"2px solid ".concat(m())}},get cursor(){return a()||d()?"default":"pointer"},onMouseEnter:()=>{i(t.obj.name,t.obj.is_dir,!0)},onContextMenu:r=>{v(()=>{l(t.index,!0,!0)}),u(r,{props:t.obj})},get children(){return e(_,{w:"$full",pos:"relative",get children(){return[e(o,{get when(){return y()},get children(){return e(T,{pos:"absolute",left:"$1",top:"$1","on:mousedown":r=>{r.stopPropagation()},"on:click":r=>{r.stopPropagation()},get checked(){return t.obj.selected},onChange:r=>{l(t.index,r.target.checked)}})}}),e(F,{h:"150px",w:"$full",objectFit:"cover",rounded:"$lg",shadow:"$md",get fallback(){return e(M,{size:"lg"})},fallbackErr:c,get src(){return n(t.obj)},loading:"lazy","on:dblclick":()=>{a()&&(h.emit("gallery",t.obj.name),l(t.index,!0,!0))},"on:click":r=>{if(!a()&&!(r.ctrlKey||r.metaKey||r.shiftKey)&&p()){if(d())return l(t.index,!t.obj.selected);h.emit("gallery",t.obj.name)}}})]}})}})}})},ie=t=>{const s=A(),i=E(()=>e(G,{w:"$full",gap:"$1",templateColumns:"repeat(auto-fill, minmax(100px,1fr))",class:"image-folders",get children(){return e(b,{get each(){return f.objs.filter(n=>n.is_dir)},children:(n,a)=>e(X,{obj:n,get index(){return a()}})})}})),{registerSelectContainer:c,captureContentMenu:u}=$();return c(),e(x,{"oncapture:contextmenu":u,class:"viselect-container",spacing:"$2",w:"$full",get children(){return[e(o,{get when(){return g.show_count_msg==="visible"},get children(){return e(L,{w:"100%",textAlign:"left",pl:"$2",get children(){return e(O,{size:"sm",color:"$neutral11",get children(){return P(w.IMAGE)}})}})}}),e(o,{get when(){return g.show_folder_in_image_view==="top"},get children(){return i()}}),e(o,{get when(){return t.images.length>0},get fallback(){return e(z,{m:"$2",get children(){return s("home.no_images")}})},get children(){return e(W,{w:"$full",gap:"$1",flexWrap:"wrap",class:"image-images",get children(){return e(b,{get each(){return f.objs},children:(n,a)=>e(H,{obj:n,get index(){return a()}})})}})}}),e(o,{get when(){return g.show_folder_in_image_view==="bottom"},get children(){return i()}})]}})};export{ie as default};
