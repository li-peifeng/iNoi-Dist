import{dd as z,dD as q,q as H,J as N,x as S,G as E,y as A,bQ as V,S as D,ds as G,de as F,dE as k,aU as B,dF as X,dG as Y,dH as I,dC as Z,dy as ee,aH as W,bO as te}from"./index-6b94e9c1.js";var C=(e=>(e.menu="solid-contextmenu",e.submenu="solid-contextmenu solid-contextmenu__submenu",e.submenuArrow="solid-contextmenu__submenu-arrow",e.submenuOpen="solid-contextmenu__submenu--is-open",e.separator="solid-contextmenu__separator",e.item="solid-contextmenu__item",e.itemDisabled="solid-contextmenu__item--disabled",e.itemContent="solid-contextmenu__item__content",e.theme="solid-contextmenu__theme--",e.animationWillEnter="solid-contextmenu__will-enter--",e.animationWillLeave="solid-contextmenu__will-leave--",e))(C||{});function J(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}const ne=e=>{let t,i=!0;const[o,c]=H(),[y,x]=H(),w=X(()=>e.children),m=e.name||"s";e=N({name:m,enterActiveClass:m+"-enter-active",enterClass:m+"-enter",enterToClass:m+"-enter-to",exitActiveClass:m+"-exit-active",exitClass:m+"-exit",exitToClass:m+"-exit-to"},e);const{onBeforeEnter:b,onEnter:a,onAfterEnter:u,onBeforeExit:f,onExit:$,onAfterExit:r}=e;function p(n,s){if(!i||e.appear){let l=function(v){n&&(!v||v.target===n)&&(n.removeEventListener("transitionend",l),n.removeEventListener("animationend",l),n.classList.remove(...d),n.classList.remove(...h),te(()=>{o()!==n&&c(n),y()===n&&x(void 0)}),u&&u(n),e.mode==="inout"&&_(n,s))};const g=e.enterClass.split(" "),d=e.enterActiveClass.split(" "),h=e.enterToClass.split(" ");b&&b(n),n.classList.add(...g),n.classList.add(...d),J(()=>{n.classList.remove(...g),n.classList.add(...h),a&&a(n,()=>l()),(!a||a.length<2)&&(n.addEventListener("transitionend",l),n.addEventListener("animationend",l))})}s&&!e.mode?x(n):c(n)}function _(n,s){const l=e.exitClass.split(" "),g=e.exitActiveClass.split(" "),d=e.exitToClass.split(" ");if(!s.parentNode)return h();f&&f(s),s.classList.add(...l),s.classList.add(...g),J(()=>{s.classList.remove(...l),s.classList.add(...d)}),$&&$(s,()=>h()),(!$||$.length<2)&&(s.addEventListener("transitionend",h),s.addEventListener("animationend",h));function h(v){(!v||v.target===s)&&(s.removeEventListener("transitionend",h),s.removeEventListener("animationend",h),s.classList.remove(...g),s.classList.remove(...d),o()===s&&c(void 0),r&&r(s),e.mode==="outin"&&p(n,s))}}return Y(n=>{for(t=w();typeof t=="function";)t=t();return I(()=>(t&&t!==n&&(e.mode!=="outin"?p(t,n):i&&c(t)),n&&n!==t&&e.mode!=="inout"&&_(t,n),i=!1,t))}),[o,y]};function ie(e){return{all:e=e||new Map,on:function(t,i){var o=e.get(t);o?o.push(i):e.set(t,[i])},off:function(t,i){var o=e.get(t);o&&(i?o.splice(o.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var o=e.get(t);o&&o.slice().map(function(c){c(i)}),(o=e.get("*"))&&o.slice().map(function(c){c(t,i)})}}}const L=ie(),K=Z(),Q=()=>ee(K);function U(e){var t,i,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=U(e[t]))&&(o&&(o+=" "),o+=i);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function O(){for(var e,t,i=0,o="";i<arguments.length;)(e=arguments[i++])&&(t=U(e))&&(o&&(o+=" "),o+=t);return o}const oe=W("<div></div>",2),M=(e,t,i)=>e+t<=i?e:e<t?i-t:e-t,se=(e,t)=>{const i={width:window.innerWidth,height:window.innerHeight};return{x:M(e.x,t.width,i.width),y:M(e.y,t.height,i.height)}},he=e=>{const[t,i]=q(e,["id","theme","animation","onShown","onHidden"]),[o,c]=H(!1),[y,x]=H({x:0,y:0});let w;const[m,b]=H();L.on("show",r=>{var p;r.id===t.id&&(r.event.preventDefault(),b(r.props),c(!0),x((p=r.position)!=null?p:se({x:r.event.clientX,y:r.event.clientY},{width:w.offsetWidth,height:w.offsetHeight})))});const a=()=>{L.emit("hide",t.id),c(!1)},u=N({shown:o,animation:"scale",hide:a,props:m},t);L.on("hideAll",()=>{a()}),S(()=>{L.off("show"),L.off("hideAll")});const f=E(()=>{let r="";return t.animation&&(r="solid-contextmenu-".concat(t.animation)),console.log(r),r}),$=E(()=>({enterActiveClass:f()+"-enter-active",exitActiveClass:f()+"-exit-active"}));return A(K.Provider,{value:u,get children(){return A(V,{get children(){return A(ne,N($,{get children(){return A(D,{get when(){return o()},get children(){const r=oe.cloneNode(!0),p=w;return typeof p=="function"?p(r):w=r,re(r,()=>a()),G(r,i,!1,!1),F(_=>{const n=O(C.menu,i.class,{["".concat(C.theme).concat(t.theme)]:t.theme}),s=y().x+"px",l=y().y+"px";return n!==_._v$&&k(r,_._v$=n),s!==_._v$2&&r.style.setProperty("left",_._v$2=s),l!==_._v$3&&r.style.setProperty("top",_._v$3=l),_},{_v$:void 0,_v$2:void 0,_v$3:void 0}),r}})}}))}})}})};function re(e,t){const i=o=>{var c;return!e.contains(o.target)&&((c=t())==null?void 0:c())};document.body.addEventListener("click",i),S(()=>document.body.removeEventListener("click",i))}function de(e){return typeof e=="function"}function T(e,t){return de(e)?e(t):e}const ae=W("<div><div></div></div>",4),ue=e=>{const[t,i]=q(e,["hidden","disabled","onClick","data","children"]),o=N({hidden:!1,disabled:!1},t),{props:c,hide:y}=Q(),x=E(()=>({props:c(),data:e.data})),w=E(()=>T(o.disabled,x())),m=E(()=>T(o.hidden,x())),b=a=>{var u;w()||((u=e.onClick)==null||u.call(e,{event:a,...x()}),y())};return A(D,{get when(){return!m()},get children(){const a=ae.cloneNode(!0),u=a.firstChild;return a.$$click=b,G(a,i,!1,!0),B(u,()=>t.children),F(f=>{const $=O(C.item,{[C.itemDisabled]:w()}),r=C.itemContent;return $!==f._v$&&k(a,f._v$=$),r!==f._v$2&&k(u,f._v$2=r),f},{_v$:void 0,_v$2:void 0}),a}})};z(["click"]);const le=W("<div></div>",2),ce=W("<div><div><span></span></div></div>",6),me=e=>{const[t,i]=q(e,["arrow","children","disabled","hidden","label","class"]),o=N({arrow:"▶️",disabled:!1,hidden:!1},t),{props:c,id:y}=Q(),x=E(()=>({props:c()})),w=E(()=>T(o.disabled,x())),m=E(()=>T(o.hidden,x()));let b,a;const[u,f]=H({x:0,y:0}),$=()=>{const n=b.getBoundingClientRect(),s=a.getBoundingClientRect(),l={width:window.innerWidth,height:window.innerHeight};let g=n.right;g+s.width>l.width&&(n.left-s.width>0?g=n.left-s.width:g=l.width-s.width);let d=n.top;d+s.height>l.height&&(n.bottom-s.height>0?d=n.bottom-s.height:d=l.height-s.height),f({x:g,y:d}),console.log(u())},[r,p]=H(!1),_=()=>{p(!0),$()};return L.on("hide",n=>{n===y&&p(!1)}),S(()=>{L.off("hide")}),A(D,{get when(){return!m()},get children(){const n=ce.cloneNode(!0),s=n.firstChild,l=s.firstChild;n.$$click=()=>r()?p(!1):_(),n.addEventListener("mouseleave",()=>p(!1)),n.addEventListener("mouseenter",()=>_()),G(n,i,!1,!0);const g=b;return typeof g=="function"?g(s):b=s,B(s,()=>o.label,l),B(l,()=>o.arrow),B(n,A(D,{get when(){return r()},get children(){const d=le.cloneNode(!0),h=a;return typeof h=="function"?h(d):a=d,B(d,()=>o.children),F(v=>{const P=C.submenu,R=u().x+"px",j=u().y+"px";return P!==v._v$&&k(d,v._v$=P),R!==v._v$2&&d.style.setProperty("left",v._v$2=R),j!==v._v$3&&d.style.setProperty("top",v._v$3=j),v},{_v$:void 0,_v$2:void 0,_v$3:void 0}),d}}),null),F(d=>{const h=O(C.item,t.class,{[C.itemDisabled]:w()}),v=C.itemContent,P=C.submenuArrow;return h!==d._v$4&&k(n,d._v$4=h),v!==d._v$5&&k(s,d._v$5=v),P!==d._v$6&&k(l,d._v$6=P),d},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),n}})};z(["click"]);const fe=e=>({show:(t,i)=>{L.emit("show",{id:(i==null?void 0:i.id)||(e==null?void 0:e.id),props:(i==null?void 0:i.props)||(e==null?void 0:e.props),event:t,position:i==null?void 0:i.position})},hideAll:()=>{L.emit("hideAll")}});export{me as C,fe as b,he as w,ue as x};
