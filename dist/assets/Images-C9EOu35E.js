import{dd as $,Q as p,E as t,aC as d,aW as k,al as C,ah as x,aO as y,S as l,dQ as i,b0 as I,aM as m,aJ as _,bV as v,av as M,P as S,W as h,R as b,df as W,r as f,bZ as E,b_ as L,q as O}from"./index-DuiyklHM.js";import{b as P}from"./style-B4RvIEel.js";import{I as G}from"./ImageWithError-yx42OOaQ.js";import{O as z,g as F}from"./icon-D3YkABn6.js";import{I as K,u as w}from"./helper-CeV3bWFX.js";import{G as A}from"./GridItem-DraY3yuL.js";import"./Layout-IRAXW3q4.js";import"./index-DO2EUrkv.js";import"./index-11GuX60J.js";import"./FolderTree-DTj5ppIL.js";import"./index-CwKJX1F_.js";import"./index-Cvi8AQEF.js";import"./index-Bef5PlHP.js";const H=e=>{const{isHide:s}=$();if(s(e.obj)||e.obj.type!==z.IMAGE)return null;const{setPathAs:o}=p(),c=t(k,{get color(){return d()},boxSize:"$12",get as(){return F(e.obj)}}),{show:u}=P({id:1}),{rawLink:n}=C(),{openWithDoubleClick:a,toggleWithClick:g,restoreSelectionCache:j}=w();return t(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{"flex-grow":1},get children(){return t(x,{w:"$full",get classList(){return{selected:!!e.obj.selected}},class:"image-item viselect-item",get"data-index"(){return e.index},p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",border:"2px solid transparent",get _hover(){return{border:"2px solid ".concat(d())}},get cursor(){return a()||g()?"default":"pointer"},onMouseEnter:()=>{o(e.obj.name,e.obj.is_dir,!0)},onContextMenu:r=>{v(()=>{i(e.index,!0,!0)}),u(r,{props:e.obj})},get children(){return t(y,{w:"$full",pos:"relative",get children(){return[t(l,{get when(){return I()},get children(){return t(K,{pos:"absolute",left:"$1",top:"$1","on:mousedown":r=>{r.stopPropagation()},"on:click":r=>{r.stopPropagation()},get checked(){return e.obj.selected},onChange:r=>{i(e.index,r.target.checked)}})}}),t(G,{h:"150px",w:"$full",objectFit:"cover",rounded:"$lg",shadow:"$md",get fallback(){return t(_,{size:"lg"})},fallbackErr:c,get src(){return n(e.obj)},loading:"lazy","on:dblclick":()=>{a()&&(m.emit("gallery",e.obj.name),i(e.index,!0,!0))},"on:click":r=>{if(!a()&&!(r.ctrlKey||r.metaKey||r.shiftKey)&&j()){if(g())return i(e.index,!e.obj.selected);m.emit("gallery",e.obj.name)}}})]}})}})}})},ee=e=>{const s=O(),o=S(()=>t(W,{w:"$full",gap:"$1",templateColumns:"repeat(auto-fill, minmax(100px,1fr))",class:"image-folders",get children(){return t(h,{get each(){return b.objs.filter(n=>n.is_dir)},children:(n,a)=>t(A,{obj:n,get index(){return a()}})})}})),{registerSelectContainer:c,captureContentMenu:u}=w();return c(),t(x,{"oncapture:contextmenu":u,class:"viselect-container",spacing:"$2",w:"$full",get children(){return[t(l,{get when(){return f.show_folder_in_image_view==="top"},get children(){return o()}}),t(l,{get when(){return e.images.length>0},get fallback(){return t(L,{m:"$2",get children(){return s("home.no_images")}})},get children(){return t(E,{w:"$full",gap:"$1",flexWrap:"wrap",class:"image-images",get children(){return t(h,{get each(){return b.objs},children:(n,a)=>t(H,{obj:n,get index(){return a()}})})}})}}),t(l,{get when(){return f.show_folder_in_image_view==="bottom"},get children(){return o()}})]}})};export{ee as default};
