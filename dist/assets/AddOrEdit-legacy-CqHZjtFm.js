System.register(["./index-legacy-yN-z1lAK.js","./FolderTree-legacy-BwKFRLkt.js","./PublicKeys-legacy-BpF13vS-.js","./index-legacy-WW2-yCg0.js"],function(e,r){"use strict";var n,t,s,a,i,l,u,d,c,g,o,p,h,m,f,w,b,y,x,$,I,_,v,k,C;return{setters:[e=>{n=e.k,t=e.bZ,s=e.bd,a=e.bv,i=e.E,l=e.ai,u=e.c4,d=e.q,c=e.S,g=e.bV,o=e.bI,p=e.I,h=e.a6,m=e.c3,f=e.U,w=e.aZ,b=e.L,y=e.by,x=e.x,$=e.a7,I=e.cS,_=e.bg,v=e.ap},e=>{k=e.a},e=>{C=e.P},null],execute:function(){const r=e=>{const r=d();return i(g,{display:"inline-flex",flexDirection:"row",alignItems:"center",gap:"$2",rounded:"$md",shadow:"$md",p:"$2",w:"fit-content",get children(){return[i(o,{mb:"0",get children(){return r(`users.permissions.${e.name}`)}}),i(_,{get checked(){return e.can},onChange:()=>e.onChange(!e.can)})]}})};e("default",()=>{const e=d(),{params:q,back:S}=n(),{id:j}=q,[D,T]=t({id:0,username:"",password:"",base_path:"",role:0,permission:0,disabled:!1,sso_id:""}),[F,P]=s(()=>a.get(`/admin/user/get?id=${j}`));j&&(async()=>{const e=await P();y(e,T)})();const[Z,z]=s(()=>a.post("/admin/user/"+(j?"update":"create"),D));return i(v,{get loading(){return F()},get children(){return i(l,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[i(u,{get children(){return e("global."+(j?"edit":"add"))}}),i(c,{get when(){return!h.is_guest(D)},get children(){return[i(g,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[i(o,{for:"username",display:"flex",alignItems:"center",get children(){return e("users.username")}}),i(p,{id:"username",get value(){return D.username},onInput:e=>T("username",e.currentTarget.value)})]}}),i(g,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[i(o,{for:"password",display:"flex",alignItems:"center",get children(){return e("users.password")}}),i(p,{id:"password",type:"password",placeholder:"********",get value(){return D.password},onInput:e=>T("password",e.currentTarget.value)})]}})]}}),i(g,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[i(o,{for:"base_path",display:"flex",alignItems:"center",get children(){return e("users.base_path")}}),i(k,{id:"base_path",get value(){return D.base_path},onChange:e=>T("base_path",e),onlyFolder:!0})]}}),i(g,{w:"$full",required:!0,get children(){return[i(o,{display:"flex",alignItems:"center",get children(){return e("users.permission")}}),i(m,{w:"$full",wrap:"wrap",gap:"$2",get children(){return i(f,{each:w,children:(e,n)=>i(r,{name:e,get can(){return h.can(D,n())},onChange:e=>{T("permission",e?D.permission|=1<<n():D.permission&=~(1<<n()))}})})}})]}}),i(c,{get when(){return j&&!h.is_guest(D)},get children(){return i(C,{isMine:!1,get userId(){return parseInt(j)}})}}),i(b,{get loading(){return Z()},onClick:async()=>{const r=await z();y(r,async()=>{x.success(e("global.save_success")),D.username===$().username&&y(await a.get("/me"),I),S()})},get children(){return e("global."+(j?"save":"add"))}}),i(g,{w:"fit-content",display:"flex",get children(){return i(_,{css:{whiteSpace:"nowrap"},id:"disabled",onChange:e=>T("disabled",e.currentTarget.checked),color:"$neutral10",fontSize:"$sm",get checked(){return D.disabled},get children(){return e("users.disabled")}})}})]}})}})})}}});
