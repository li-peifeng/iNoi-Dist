System.register(["./index-legacy-BGZ4qXxI.js","./index-legacy-C29Vn1XX.js","./DeletePopover-legacy-Cx1PmQRF.js"],function(e,r){"use strict";var t,n,a,s,l,g,i,o,d,c,u,h,b,m,f,$,p,v,w,k,_,y,C,x,S,B,j,H,L,P,T,D,M,O,U,W,X,q,z,A,E,I,J,N;return{setters:[e=>{t=e.E,n=e.aH,a=e.ae,s=e.b3,l=e.q,g=e.af,i=e.am,o=e.aB,d=e.a3,c=e.ag,u=e.dB,h=e.dy,b=e.k,m=e.bd,f=e.bv,$=e.L,p=e.bf,v=e.by,w=e.x,k=e.C,_=e.P,y=e.cv,C=e.S,x=e.bJ,S=e.bL,B=e.bM,j=e.bN,H=e.bO,L=e.bP,P=e.bQ,T=e.U,D=e.bR,M=e.bS,O=e.bT,U=e.bU,W=e.a6,X=e.a7,q=e.dl,z=e.dw,A=e.dx,E=e.dz,I=e.dA},e=>{J=e.f},e=>{N=e.D}],execute:function(){function r(e){const r=l(),{to:n}=b(),[a,s]=m(()=>f.post(`/admin/storage/delete?id=${e.storage.id}`)),[g,i]=m(()=>f.post(`/admin/storage/${e.storage.disabled?"enable":"disable"}?id=${e.storage.id}`));return[t($,{onClick:()=>{n(`/@manage/storages/edit/${e.storage.id}`)},get children(){return r("global.edit")}}),t($,{get loading(){return g()},get colorScheme(){return e.storage.disabled?"success":"warning"},onClick:async()=>{const r=await i();p(r,()=>{e.refresh()})},get children(){return r("global."+(e.storage.disabled?"enable":"disable"))}}),t(N,{get name(){return e.storage.mount_path},get loading(){return a()},onClick:async()=>{const t=await s();v(t,()=>{w.success(r("global.delete_success")),e.refresh()})}})]}function Q(e){const u=l();return t(c,{w:"$full",spacing:"$2",rounded:"$lg",border:"1px solid $neutral7",get background(){return d("$neutral2","$neutral3")()},p:"$3",get _hover(){return{border:`1px solid ${o()}`}},get children(){return[t(n,{spacing:"$2",get children(){return[t(a,{fontWeight:"$medium",css:{wordBreak:"break-all"},get children(){return e.storage.mount_path}}),t(s,{colorScheme:"info",get children(){return u(`drivers.drivers.${e.storage.driver}`)}})]}}),t(n,{get children(){return[t(a,{get children(){return[g(()=>u("storages.common.status")),":Â "]}}),t(i,{css:{wordBreak:"break-all"},overflowX:"auto",get innerHTML(){return u(`storages.table_fields.status.${e.storage.status}`,void 0,e.storage.status)}})]}}),t(a,{css:{wordBreak:"break-all"},get children(){return e.storage.remark}}),t(n,{spacing:"$2",get children(){return t(r,e)}})]}})}function R(e){const a=l();return t(h,{get children(){return[t(u,{get children(){return e.storage.mount_path}}),t(u,{get children(){return a(`drivers.drivers.${e.storage.driver}`)}}),t(u,{get children(){return e.storage.order}}),t(u,{get children(){return a(`storages.table_fields.status.${e.storage.status}`,void 0,e.storage.status)}}),t(u,{get children(){return e.storage.remark}}),t(u,{get children(){return t(n,{spacing:"$2",get children(){return t(r,e)}})}})]}})}e("default",()=>{const e=l();J("manage.sidemenu.storages");const{to:r}=b(),[a,s]=m(()=>f.get("/admin/storage/list")),[g,o]=k([]),d=async()=>{const e=await s();v(e,e=>o(e.content))},[u,p]=k([]),[N,F]=k([]);(async()=>{const e=await f.get("/admin/driver/names");v(e,e=>p(e))})(),d();const G=async()=>{const r=await f.post("/admin/storage/load_all");v(r,()=>{w.success(e("storages.other.start_load_success"))})},K=_(()=>g().filter(e=>0===N().length||N().includes(e.driver))),[V,Y]=y("storages-layout","grid");return t(c,{spacing:"$3",alignItems:"start",w:"$full",get children(){return[t(n,{spacing:"$2",gap:"$2",w:"$full",wrap:{"@initial":"wrap","@md":"unset"},get children(){return[t($,{colorScheme:"accent",get loading(){return a()},onClick:d,get children(){return e("global.refresh")}}),t($,{onClick:()=>{r("/@manage/storages/add")},get children(){return e("global.add")}}),t($,{colorScheme:"warning",get loading(){return a()},onClick:G,get children(){return e("storages.other.load_all")}}),t(C,{get when(){return u().length>0},get children(){return t(x,{multiple:!0,get value(){return N()},onChange:F,get children(){return[t(S,{get children(){return[t(B,{get children(){return e("storages.other.filter_by_driver")}}),t(j,{}),t(H,{})]}}),t(L,{get children(){return t(P,{get children(){return t(T,{get each(){return u()},children:r=>t(D,{value:r,get children(){return[t(M,{get children(){return e(`drivers.drivers.${r}`)}}),t(O,{})]}})})}})}})]}})}}),t(U,{minW:80,get checked(){return"table"===V()},onChange:e=>{Y(e.currentTarget.checked?"table":"grid")},get children(){return e("storages.other.table_layout")}})]}}),t(W,{get children(){return[t(X,{get when(){return"grid"===V()},get children(){return t(q,{w:"$full",gap:"$2_5",templateColumns:{"@initial":"1fr","@lg":"repeat(auto-fill, minmax(324px, 1fr))"},get children(){return t(T,{get each(){return K()},children:e=>t(Q,{storage:e,refresh:d})})}})}}),t(X,{get when(){return"table"===V()},get children(){return t(i,{w:"$full",overflowX:"auto",get children(){return t(z,{highlightOnHover:!0,dense:!0,get children(){return[t(A,{get children(){return t(h,{get children(){return[t(T,{each:["mount_path","driver","order","status","remark"],children:r=>t(E,{get children(){return e(`storages.common.${r}`)}})}),t(E,{get children(){return e("global.operations")}})]}})}}),t(I,{get children(){return t(T,{get each(){return K()},children:e=>t(R,{storage:e,refresh:d})})}})]}})}})}})]}})]}})})}}});
