System.register(["./index-legacy-e5ffbfab.js","./index-legacy-b5800f83.js","./DeletePopover-legacy-7537895d.js","./Wether-legacy-f4f30398.js"],function(e,r){"use strict";var n,t,c,l,a,s,i,u,d,g,o,h,m,b,$,p,f,y,_,w,k,v,C,S,j,x,D;return{setters:[e=>{n=e.b,t=e.d,c=e.b5,l=e.bm,a=e.q,s=e.dl,i=e.y,u=e.aA,d=e.D,g=e.ag,o=e.dm,h=e.dn,m=e.dp,b=e.K,$=e.dq,p=e.dr,f=e.ds,y=e.bn,_=e.n,w=e.aa,k=e.aX,v=e.aP,C=e.aR,S=e.aB},e=>{j=e.e},e=>{x=e.D},e=>{D=e.W}],execute:function(){const r=e=>{const r=[{name:"general",color:"info"},{name:"guest",color:"neutral"},{name:"admin",color:"accent"}];return i(k,{get colorScheme(){return r[e.role].color},get children(){return r[e.role].name}})},q=e=>{const r=n();return i(u,{spacing:"$0_5",get children(){return i(b,{each:v,children:(n,t)=>i(C,{get label(){return r(`users.permissions.${n}`)},get children(){return i(g,{boxSize:"$2",rounded:"$full",get bg(){return`$${S.can(e.user,t())?"success":"danger"}9`}})}})})}})};e("default",()=>{const e=n();j("manage.sidemenu.users");const{to:k}=t(),[v,C]=c(()=>l.get("/admin/user/list")),[S,P]=a([]),W=async()=>{const e=await C();y(e,e=>P(e.content))};W();const[X,z]=s(e=>l.post(`/admin/user/delete?id=${e}`)),[A,B]=s(e=>l.post(`/admin/user/cancel_2fa?id=${e}`));return i(w,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[i(u,{spacing:"$2",get children(){return[i(d,{colorScheme:"accent",get loading(){return v()},onClick:W,get children(){return e("global.refresh")}}),i(d,{onClick:()=>{k("/@manage/users/add")},get children(){return e("global.add")}})]}}),i(g,{w:"$full",overflowX:"auto",get children(){return i(o,{highlightOnHover:!0,dense:!0,get children(){return[i(h,{get children(){return i(m,{get children(){return[i(b,{each:["username","base_path","role","permission","available"],children:r=>i($,{get children(){return e(`users.${r}`)}})}),i($,{get children(){return e("global.operations")}})]}})}}),i(p,{get children(){return i(b,{get each(){return S()},children:n=>i(m,{get children(){return[i(f,{get children(){return n.username}}),i(f,{get children(){return n.base_path}}),i(f,{get children(){return i(r,{get role(){return n.role}})}}),i(f,{get children(){return i(q,{user:n})}}),i(f,{get children(){return i(D,{get yes(){return!n.disabled}})}}),i(f,{get children(){return i(u,{spacing:"$2",get children(){return[i(d,{onClick:()=>{k(`/@manage/users/edit/${n.id}`)},get children(){return e("global.edit")}}),i(x,{get name(){return n.username},get loading(){return X()===n.id},onClick:async()=>{const r=await z(n.id);y(r,()=>{_.success(e("global.delete_success")),W()})}}),i(d,{colorScheme:"accent",get loading(){return A()===n.id},onClick:async()=>{const r=await B(n.id);y(r,()=>{_.success(e("users.cancel_2fa_success")),W()})},get children(){return e("users.cancel_2fa")}})]}})}})]}})})}})]}})}})]}})})}}});
