System.register(["./index-legacy-9f6e88c1.js","./index-legacy-80545402.js","./index-legacy-0bc5b4a4.js","./FolderTree-legacy-ceef258b.js","./index-legacy-f9ea3bfa.js","./index-legacy-ab7201a2.js"],(function(e,t){"use strict";var r,n,o,a,l,i,c,s,u,d,g,h,p,m,f,b,w,y,_,v,F,k,$,C,x,S,A,E,D,M,O,B,z,j,I,L,R,V,T,U,H,N,P,q,W,G,K,J,X,Y,Q,Z,ee,te,re,ne,oe,ae,le,ie,ce,se,ue,de,ge,he,pe,me,fe,be,we,ye,_e,ve,Fe,ke,$e,Ce,xe,Se,Ae,Ee,De,Me,Oe,Be,ze,je,Ie,Le,Re,Ve,Te,Ue,He,Ne,Pe,qe,We,Ge,Ke,Je,Xe,Ye,Qe,Ze,et,tt,rt,nt,ot,at,lt,it,ct,st,ut,dt,gt,ht,pt,mt,ft,bt,wt,yt,_t,vt,Ft,kt,$t,Ct,xt,St,At,Et,Dt,Mt,Ot,Bt,zt,jt,It,Lt,Rt,Vt,Tt,Ut,Ht,Nt,Pt,qt,Wt,Gt,Kt,Jt,Xt,Yt,Qt,Zt,er,tr,rr,nr,or,ar,lr,ir,cr,sr,ur,dr,gr,hr,pr,mr,fr,br,wr,yr,_r;return{setters:[e=>{r=e.u,n=e.b,o=e.d,a=e.e,l=e.n,i=e.g,c=e.i,s=e.j,u=e.k,d=e.l,g=e._,h=e.o,p=e.q,m=e.r,f=e.x,b=e.y,w=e.M,y=e.z,_=e.A,v=e.B,F=e.S,k=e.I,$=e.T,C=e.F,x=e.C,S=e.D,A=e.E,E=e.G,D=e.H,M=e.J,O=e.K,B=e.L,z=e.N,j=e.O,I=e.P,L=e.Q,R=e.R,V=e.U,T=e.V,U=e.W,H=e.X,N=e.Y,P=e.Z,q=e.$,W=e.a0,G=e.a1,K=e.a2,J=e.a3,X=e.a4,Y=e.a5,Q=e.a6,Z=e.a7,ee=e.a8,te=e.a9,re=e.aa,ne=e.ab,oe=e.ac,ae=e.ad,le=e.ae,ie=e.af,ce=e.ag,se=e.ah,ue=e.ai,de=e.aj,ge=e.ak,he=e.al,pe=e.am,me=e.an,fe=e.ao,be=e.ap,we=e.aq,ye=e.ar,_e=e.as,ve=e.at,Fe=e.au,ke=e.av,$e=e.aw,Ce=e.ax,xe=e.ay,Se=e.az,Ae=e.aA,Ee=e.aB,De=e.aC,Me=e.aD,Oe=e.aE,Be=e.aF,ze=e.aG,je=e.aH,Ie=e.aI,Le=e.aJ,Re=e.aK,Ve=e.aL,Te=e.aM,Ue=e.aN,He=e.aO,Ne=e.aP,Pe=e.aQ,qe=e.aR,We=e.aS,Ge=e.aT,Ke=e.aU,Je=e.aV,Xe=e.aW,Ye=e.aX,Qe=e.aY,Ze=e.aZ,et=e.a_,tt=e.a$,rt=e.b0,nt=e.b1,ot=e.b2,at=e.b3,lt=e.b4,it=e.b5,ct=e.b6,st=e.b7,ut=e.b8,dt=e.b9,gt=e.ba,ht=e.bb,pt=e.bc,mt=e.bd,ft=e.be,bt=e.bf,wt=e.bg,yt=e.bh,_t=e.bi,vt=e.bj,Ft=e.bk,kt=e.bl,$t=e.bm,Ct=e.bn,xt=e.bo,St=e.bp,At=e.bq,Et=e.br,Dt=e.bs,Mt=e.bt,Ot=e.bu,Bt=e.bv,zt=e.bw,jt=e.bx,It=e.by,Lt=e.bz,Rt=e.bA,Vt=e.bB,Tt=e.bC,Ut=e.bD,Ht=e.bE,Nt=e.bF,Pt=e.bG,qt=e.bH,Wt=e.bI,Gt=e.bJ,Kt=e.bK,Jt=e.bL,Xt=e.bM,Yt=e.bN,Qt=e.bO,Zt=e.bP,er=e.bQ},e=>{tr=e.u,rr=e.I,nr=e.S,or=e.a},e=>{ar=e.L,lr=e.T,ir=e.a,cr=e.b,sr=e.c,ur=e.d,dr=e.B,gr=e.e,hr=e.V,pr=e.f,mr=e.g,fr=e.h},e=>{br=e.F,wr=e.M},e=>{yr=e.R},e=>{_r=e.c}],execute:function(){function vr(e){return null==e||""===e}e({I:function(e){return Ie({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M14 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zM2 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zm1.5 5.5A1.5 1.5 0 0 0 5 13v2c0 .55.45 1 1 1s1-.45 1-1v-2h2v2c0 .55.45 1 1 1s1-.45 1-1v-2a1.5 1.5 0 0 0 1.5-1.5V6h-9v5.5zM12.472 5a4.5 4.5 0 0 0-2.025-3.276l.5-1.001a.5.5 0 0 0-.895-.447L9.55 1.28l-.13-.052a4.504 4.504 0 0 0-2.84 0l-.13.052L5.948.276a.5.5 0 0 0-.895.447l.5 1.001A4.499 4.499 0 0 0 3.528 5v.5H12.5V5h-.028zM6.5 4a.5.5 0 0 1-.001-1h.002A.5.5 0 0 1 6.5 4zm3 0a.5.5 0 0 1-.001-1h.003a.5.5 0 0 1-.001 1z"/>'},e)},c:an});const Fr=e("u",(()=>{const{rawLinks:e}=r(),t=n(),{pathname:p}=o();return{batchDownloadSelected:()=>{e(!0).forEach((e=>{window.open(e,"_blank")}))},sendToAria2:async()=>{const e=a(),r=async(e,t)=>{if(t.is_dir){const n=await d(s(p(),e,t.name),g());if(200!==n.code)return n.message;const o=[];for(const a of n.data.content??[]){const n=await r(s(e,t.name),a);if("string"==typeof n)return n;o.push(...n)}return o}return[{path:s(e,t.name),dir:e,url:u(s(p(),e),t,"direct",!0),name:t.name}]},{aria2_rpc_url:n,aria2_rpc_secret:o}=h;if(n)try{let a="/downloads/iNoi";a=await async function(e,t){let r="/downloads/iNoi";const n=await i.post(e,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.getGlobalOption",params:["token:"+t]});return console.log(n),200===n.status&&(vr(n.data.result.dir)||(r=n.data.result.dir),r=r.endsWith("/")?r.slice(0,-1):r),r}(n,o);let c=!1;l.info(`${t("home.package_download.fetching_struct")}`);for(const s of e){const e=await r("",s);if("object"!=typeof e||void 0===e.length)return l.error(`${t("home.package_download.fetching_struct_failed")}: ${e}`),e;for(let r=0;r<e.length;r++){if(vr(e[r].path)||null==e[r].dir||vr(e[r].url)||vr(e[r].name)){l.error(`${t("home.package_download.fetching_struct_failed")}: ${JSON.stringify(e[r])}`);continue}c||(c=!0,l.info(`${t("home.package_download.downloading")}`));const s=await i.post(n,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.addUri",params:["token:"+o,[e[r].url],{out:e[r].name,dir:a+e[r].dir,"check-certificate":"false"}]});console.log(s)}}l.success(t("home.toolbar.send_aria2_success"))}catch(c){console.error(c),l.error(t("home.toolbar.aria2_set_error"))}else l.warning(t("home.toolbar.aria2_not_set"))},playlistDownloadSelected:()=>{const r=a().filter((e=>!e.is_dir));let n=c(p());1===r.length&&(n=r[0].name),n||(n=t("manage.sidemenu.home"));const o=r.reduce(((t,r,n)=>`${t}#EXTINF:-1,${r.name}\n${e(!0)[n]}\n`),"#EXTM3U\n"),l=new Blob([o],{type:"application/x-mpegURL"}),i=document.createElement("a");i.href=URL.createObjectURL(l),i.download=`${n}.m3u8`,i.click(),URL.revokeObjectURL(i.href)}}})),kr=e=>{const[t,r]=p(e.defaultValue??""),o=n();let a;const i=()=>{const r=t().lastIndexOf(".");setTimeout((()=>{r>0&&e.isRenamingFile?a.setSelectionRange(0,r):a.select()}),10)};m((()=>{a&&(a.focus(),i()),f((()=>{a&&a.setSelectionRange(0,0)}))})),m((()=>{e.opened||r("")}));const c=()=>{t()?e.onSubmit?.(t()):l.warning(o("global.empty_input"))};return b(A,{blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},initialFocus:"#modal-input",get children(){return[b(w,{}),b(y,{onDrop:t=>e.onDrop?.(t,r),get children(){return[b(_,{get children(){return o(e.title)}}),b(v,{get children(){return[b(F,{get when(){return e.topSlot},get children(){return e.topSlot}}),b(F,{get when(){return"text"===e.type},get fallback(){return b(k,{id:"modal-input",get type(){return e.type},get value(){return t()},ref:e=>a=e,onInput:e=>{r(e.currentTarget.value)},onFocus:i,onKeyDown:e=>{"Enter"===e.key&&c()}})},get children(){return b($,{id:"modal-input",get value(){return t()},ref:e=>a=e,onInput:e=>{r(e.currentTarget.value)},onFocus:i})}}),b(F,{get when(){return e.tips},get children(){return b(C,{get children(){return e.tips}})}}),b(F,{get when(){return e.bottomSlot},get children(){return e.bottomSlot}})]}}),b(x,{display:"flex",gap:"$2",get children(){return[b(F,{get when(){return e.footerSlot},get children(){return e.footerSlot}}),b(S,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return o("global.cancel")}}),b(S,{get loading(){return e.loading},onClick:()=>c(),get children(){return o("global.ok")}})]}})]}})]}})},$r=()=>{const{pathname:e}=o(),t=E((()=>["",...e().split("/").filter(Boolean)])),r=n(),{setPathAs:a}=D(),l=E((()=>{const e={_after:{content:"",bgColor:"$background",position:"absolute",height:"100%",width:"99vw",zIndex:-1,transform:"translateX(-50%)",left:"50%",top:0}};switch(h.position_of_header_navbar){case"only_navbar_sticky":return{...e,position:"sticky",zIndex:"$sticky",top:0};case"sticky":return{...e,position:"sticky",zIndex:"$sticky",top:60};default:return{_after:void 0,position:void 0,zIndex:void 0,top:void 0}}}));return b(T,M(l,{background:"$background",class:"nav",w:"$full",get children(){return b(O,{get each(){return t()},children:(e,n)=>{const o=E((()=>n()===t().length-1)),l=t().slice(0,n()+1).join("/"),i=B(l);let c=()=>e;return""===c()&&(c=()=>U("home_icon")+r("manage.sidemenu.home")),b(z,{class:"nav-item",get children(){return[b(j,{class:"nav-link",css:{wordBreak:"break-all"},color:"unset",get _hover(){return{bgColor:I(),color:"unset"}},_active:{transform:"scale(.95)",transition:"0.1s"},cursor:"pointer",p:"$1",rounded:"$lg",get currentPage(){return o()},get as(){return o()?void 0:L},get href(){return R(i)},onMouseEnter:()=>a(l),children:c}),b(F,{get when(){return!o()},get children(){return b(V,{class:"nav-separator"})}})]}})}})}}))},Cr=H((()=>N((()=>t.import("./Folder-legacy-3f16735d.js")),void 0))),xr=H((()=>N((()=>t.import("./File-legacy-e7bf0f6d.js").then((e=>e.a))),void 0))),Sr=H((()=>N((()=>t.import("./Password-legacy-8c3bbecb.js")),void 0))),[Ar,Er]=p(),Dr=()=>{const e=n(),t=P("white","$neutral3"),{pathname:r,searchParams:a}=o(),{handlePathChange:l,refresh:i}=D(),c=q(),s=E((()=>"pagination"===c.type?parseInt(a.page,10)||1:void 0));let u,d;return m(W([r,s],(async([e,t])=>{u&&ne(u,d),u=e,d=t,tr(),await l(e,t)}))),b(re,{ref:e=>Er(e),class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return t()},p:"$2",shadow:"$lg",spacing:"$2",get children(){return b(G,{get fallback(){return b(K,{})},get children(){return b(J,{get children(){return[b(X,{get when(){return Y.err},get children(){return b(Q,{get msg(){return Y.err},disableColor:!0})}}),b(X,{get when(){return[Z.FetchingObj,Z.FetchingObjs].includes(Y.state)},get children(){return b(K,{})}}),b(X,{get when(){return Y.state===Z.NeedPassword},get children(){return b(Sr,{get title(){return e("home.input_password")},password:g,setPassword:ee,enterCallback:()=>i(!0),get children(){return[b(te,{get children(){return e("global.have_account")}}),b(te,{color:"$info9",as:ar,get href(){return`/@login?redirect=${encodeURIComponent(location.pathname)}`},get children(){return e("global.go_login")}})]}})}}),b(X,{get when(){return[Z.Folder,Z.FetchingMore].includes(Y.state)},get children(){return b(Cr,{})}}),b(X,{get when(){return Y.state===Z.File},get children(){return b(xr,{})}})]}})}})}})};function Mr(e){const t=P("white","$neutral3"),{proxyLink:r}=oe();o();const n=E(W((()=>Y.state),(()=>{if(![Z.FetchingMore,Z.Folder,Z.File].includes(Y.state))return"";if([Z.FetchingMore,Z.Folder].includes(Y.state)){const t=Y.objs.find((t=>e.files.find((e=>e.toLowerCase()===t.name.toLowerCase()))));if(t)return r(t,!0)}return Y[e.fromMeta]&&"string"==typeof Y[e.fromMeta]?Y[e.fromMeta]:""}))),[a]=ae(n,(async e=>{let t={content:e};return/^https?:\/\//g.test(e)&&(t=await de(e)),t}));return b(F,{get when(){return le((()=>!!ie("readme_autorender")))()&&n()},get children(){return b(ce,{w:"$full",rounded:"$xl",p:"$4",get bgColor(){return t()},shadow:"$lg",get children(){return b(se,{get loading(){return a.loading},get children(){return b(ue,{get children(){return a()?.content},readme:!0,get toc(){return"readme"===e.fromMeta}})}})}})}})}const Or=e=>{const t=U("home_container");return b(J,{get fallback(){return b(ce,{w:"min(99%, 1280px)",get children(){return e.children}})},get children(){return b(X,{when:"hope_container"===t,get children(){return b(ge,{get children(){return e.children}})}})}})};function Br(){const{to:e}=o(),t=he(),[r,n]=p(),[a,l]=p(),[i,c]=p(-999),s=()=>{const e=Ar(),t=a();if(!e||!t)return;const r=e.offsetLeft>50?16:0;t.clientWidth<e.offsetLeft-r?c(0):c(`calc(-100% + ${e.offsetLeft}px - ${r}px)`)};let u;return pe((()=>{const e=r();e?.setPath(t.pathname),u=requestAnimationFrame(s),window.addEventListener("resize",s),f((()=>window.removeEventListener("resize",s)))})),m(W((()=>Y.state),(()=>{cancelAnimationFrame(u),u=requestAnimationFrame(s)}))),m(W((()=>t.pathname),(()=>{const e=r();e?.setPath(t.pathname)}))),b(ce,{get as(){return me.div},initial:{x:-999},get animate(){return{x:i()}},zIndex:"$overlay",pos:"fixed",left:3,top:3,h:"calc(100vh - 6px)",minW:180,p:"$2",overflow:"auto",shadow:"$lg",rounded:"$lg",bgColor:"white",_dark:{backgroundColor:"$neutral3"},onMouseEnter:()=>c(0),onMouseLeave:s,ref:e=>l(e),get children(){return b(br,{autoOpen:!0,showEmptyIcon:!0,showHiddenFolder:!1,onChange:t=>e(t),handle:e=>n(e)})}})}function zr(){const e=E((()=>"none"!==h.show_sidebar));return b(F,{get when(){return e()},get children(){return b(Br,{})}})}const jr=()=>b(Or,{get children(){return b(re,{class:"body",mt:"$1",py:"$2",px:"2%",minH:"80vh",w:"$full",gap:"$4",get children(){return[b(Mr,{files:["header.md","top.md","index.md"],fromMeta:"header"}),b($r,{}),b(Dr,{}),b(Mr,{files:["footer.md","bottom.md"],fromMeta:"readme"}),b(zr,{})]}})}}),Ir=()=>(n(),b(re,{class:"footer",w:"$full",py:"$4"})),Lr={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32",transparent:"#0000"};function Rr(e,t,r){t/=100,r/=100;let n=(n,o=(n+e/60)%6)=>r-r*t*Math.max(Math.min(o,4-o,1),0);return[255*n(5),255*n(3),255*n(1)]}function Vr(e,t,r){r/=100;let n=(t/=100)*Math.min(r,1-r),o=(t,o=(t+e/30)%12)=>r-n*Math.max(Math.min(o-3,9-o,1),-1);return[255*o(0),255*o(8),255*o(4)]}const Tr="^\\s*",Ur="\\s*$",Hr="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))%\\s*",Nr="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",Pr="([0-9A-Fa-f])",qr="([0-9A-Fa-f]{2})",Wr=new RegExp(`${Tr}hsl\\s*\\(${Nr},${Hr},${Hr}\\)${Ur}`),Gr=new RegExp(`${Tr}hsv\\s*\\(${Nr},${Hr},${Hr}\\)${Ur}`),Kr=new RegExp(`${Tr}hsla\\s*\\(${Nr},${Hr},${Hr},${Nr}\\)${Ur}`),Jr=new RegExp(`${Tr}hsva\\s*\\(${Nr},${Hr},${Hr},${Nr}\\)${Ur}`),Xr=new RegExp(`${Tr}rgb\\s*\\(${Nr},${Nr},${Nr}\\)${Ur}`),Yr=new RegExp(`${Tr}rgba\\s*\\(${Nr},${Nr},${Nr},${Nr}\\)${Ur}`),Qr=new RegExp(`${Tr}#${Pr}${Pr}${Pr}${Ur}`),Zr=new RegExp(`${Tr}#${qr}${qr}${qr}${Ur}`),en=new RegExp(`${Tr}#${Pr}${Pr}${Pr}${Pr}${Ur}`),tn=new RegExp(`${Tr}#${qr}${qr}${qr}${qr}${Ur}`);function rn(e){return parseInt(e,16)}function nn(e){try{let t;if(t=Zr.exec(e))return[rn(t[1]),rn(t[2]),rn(t[3]),1];if(t=Xr.exec(e))return[sn(t[1]),sn(t[5]),sn(t[9]),1];if(t=Yr.exec(e))return[sn(t[1]),sn(t[5]),sn(t[9]),ln(t[13])];if(t=Qr.exec(e))return[rn(t[1]+t[1]),rn(t[2]+t[2]),rn(t[3]+t[3]),1];if(t=tn.exec(e))return[rn(t[1]),rn(t[2]),rn(t[3]),ln(rn(t[4])/255)];if(t=en.exec(e))return[rn(t[1]+t[1]),rn(t[2]+t[2]),rn(t[3]+t[3]),ln(rn(t[4]+t[4])/255)];if(e in Lr)return nn(Lr[e]);if(Wr.test(e)||Kr.test(e)){const[t,r,n,o]=function(e){try{let t;if(t=Kr.exec(e))return[cn(t[1]),un(t[5]),un(t[9]),ln(t[13])];if(t=Wr.exec(e))return[cn(t[1]),un(t[5]),un(t[9]),1];throw new Error(`[seemly/hsla]: Invalid color value ${e}.`)}catch(t){throw t}}(e);return[...Vr(t,r,n),o]}if(Gr.test(e)||Jr.test(e)){const[t,r,n,o]=function(e){try{let t;if(t=Jr.exec(e))return[cn(t[1]),un(t[5]),un(t[9]),ln(t[13])];if(t=Gr.exec(e))return[cn(t[1]),un(t[5]),un(t[9]),1];throw new Error(`[seemly/hsva]: Invalid color value ${e}.`)}catch(t){throw t}}(e);return[...Rr(t,r,n),o]}throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(t){throw t}}function on(e,t,r,n){return`rgba(${sn(e)}, ${sn(t)}, ${sn(r)}, ${o=n,o>1?1:o<0?0:o})`;var o}function an(e,t){const[r,n,o,a=1]=Array.isArray(e)?e:nn(e);return"number"==typeof t.alpha?on(r,n,o,t.alpha):on(r,n,o,a)}function ln(e){const t=Math.round(100*Number(e))/100;return t>1?1:t<0?0:t}function cn(e){const t=Math.round(Number(e));return t>=360||t<0?0:t}function sn(e){const t=Math.round(Number(e));return t>255?255:t<0?0:t}function un(e){const t=Math.round(Number(e));return t>100?100:t<0?0:t}const dn={list:_e,grid:ve,image:Fe},gn=()=>{const e=n();return b(Se,{get children(){return[b(fe,{as:be,tips:"home_tolayouts",get color(){return we()},get bgColor(){return an(we(),{alpha:.05})},get _hover(){return{backgroundColor:an(we(),{alpha:.2})}},"aria-label":"switch layout",compact:!0,size:"lg",get icon(){return b(J,{get children(){return[b(X,{get when(){return"list"===ye()},get children(){return b(_e,{})}}),b(X,{get when(){return"grid"===ye()},get children(){return b(ve,{})}}),b(X,{get when(){return"image"===ye()},get children(){return b(Fe,{})}})]}})}}),b(ke,{get children(){return b(O,{get each(){return Object.entries(dn)},children:t=>b($e,{get color(){return we()},get icon(){return b(Ce,{get component(){return t[1]}})},onSelect:()=>{xe(t[0])},get children(){return e(`home.layouts.${t[0]}`)}})})}})]}})};var hn=je('<svg fill=none stroke-width=2 xmlns=http://www.w3.org/2000/svg class="icon icon-tabler icon-tabler-device-ipad-horizontal-search"width=1em height=1em viewBox="0 0 24 24"stroke=currentColor stroke-linecap=round stroke-linejoin=round style=overflow:visible;color:currentcolor;><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M11.5 20h-6.5a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v5.5"></path><path d="M9 17h2"></path><path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path><path d="M20.2 20.2l1.8 1.8">'),pn=je('<svg fill=none stroke-width=2 xmlns=http://www.w3.org/2000/svg class="icon icon-tabler icon-tabler-photo-search"width=1em height=1em viewBox="0 0 24 24"stroke=currentColor stroke-linecap=round stroke-linejoin=round style=overflow:visible;color:currentcolor;><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M15 8h.01"></path><path d="M11.5 21h-5.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5"></path><path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path><path d="M20.2 20.2l1.8 1.8"></path><path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l2 2">');const mn=()=>{const e=U("logo").split("\n"),t=P(e[0],e.pop()),r=E((()=>"sticky"===h.position_of_header_navbar?{position:"sticky",zIndex:"$sticky",top:0}:{position:void 0,zIndex:void 0,top:void 0}));return b(ze,M(r,{bgColor:"$background",class:"header",w:"$full",get children(){return b(Or,{get children(){return b(Ae,{px:"calc(2% + 0.5rem)",py:"$2",w:"$full",justifyContent:"space-between",get children(){return[b(Ae,{class:"header-left",h:"48px",as:L,get href(){return Ee.is_guest(De())?"/@login":"/@manage"},get children(){return b(Me,{get src(){return t()},h:"$full",w:"auto",get fallback(){return b(Oe,{})}})}}),b(Ae,{class:"header-right",spacing:"$2",get children(){return b(F,{get when(){return Y.state===Z.Folder},get children(){return[b(be,{"aria-label":"Search",get color(){return we()},get bgColor(){return an(we(),{alpha:.05})},get _hover(){return{backgroundColor:an(we(),{alpha:.2})}},compact:!0,size:"lg",get icon(){return b(J,{get children(){return[b(X,{get when(){return"list"===ye()},get children(){return b(lr,{})}}),b(X,{get when(){return"grid"===ye()},get children(){return hn()}}),b(X,{get when(){return"image"===ye()},get children(){return pn()}})]}})},onClick:()=>{Be.emit("tool","search")}}),b(gn,{})]}})}})]}})}})}}))},fn=e("o",{rename:{icon:Le,color:"$accent9"},copy:{icon:ir,color:"$success9"},move:{icon:cr,color:"$warning9"},delete:{icon:Re,color:"$danger9"},decompress:{icon:sr,color:"$primary9"},copy_link:{icon:ur,color:"$info9"},mkdir:{icon:Ve,p:!0},recursive_move:{icon:function(e){return Ie({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M11 8v6h1V8h2.5l-3-3-3 3zM1 3h1.5v1H1V3zM3 3h1.5v1H3V3zM5 3h1v1.5H5V3zM1 6.5h1V8H1V6.5zM2.5 7H4v1H2.5V7zM4.5 7H6v1H4.5V7zM1 4.5h1V6H1V4.5zM5 5h1v1.5H5V5zM5 11v3H2v-3h3zm1-1H1v5h5v-5z"/>'},e)},p:!0},remove_empty_directory:{icon:Te,p:!0},batch_rename:{icon:dr,p:!0},new_file:{icon:Ue,p:!0},cancel_select:{icon:gr},download:{icon:He,color:"$primary9"}}),bn=e=>{const t=Ne.findIndex((t=>t===e.name));if(-1!==t&&!Ee.can(De(),t))return null;const r=n();return b(qe,{placement:"top",withArrow:!0,get label(){return r(`home.toolbar.${e.name}`)},get children(){return b(Pe,M({get class(){return`toolbar-${e.name}`},get _hover(){return{bgColor:I()}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$md",get p(){return fn[e.name]?.p?"$1_5":"$1"},_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return fn[e.name]?.icon},get color(){return fn[e.name]?.color}},e))}})},wn=e=>{const t=n();return b(qe,{get disabled(){return!e.tips},placement:"left",withArrow:!0,get label(){return t(`home.toolbar.${e.tips}`)},get children(){return b(Pe,M({get color(){return we()},get _hover(){return{bgColor:we(),color:"white"}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$lg",p:"$1",_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return e.icon}},e))}})},yn=()=>{const e=n(),{copySelectedPreviewPage:t,copySelectedRawLink:r}=We(),o="neutral";return b(Se,{placement:"top",offset:10,get children(){return[b(fe,{as:bn,name:"copy_link"}),b(ke,{get children(){return[b($e,{colorScheme:o,onSelect:()=>{t()},get children(){return e("home.toolbar.preview_page")}}),b($e,{colorScheme:o,onSelect:()=>{r()},get children(){return e("home.toolbar.down_link")}}),b($e,{colorScheme:o,onSelect:()=>{r(!0)},get children(){return e("home.toolbar.encode_down_link")}})]}})]}})};var _n=je("<p>");const vn=()=>{const e=n(),t="neutral",{batchDownloadSelected:r,sendToAria2:o,playlistDownloadSelected:a}=Fr();return b(Se,{placement:"top",offset:10,get children(){return[b(fe,{as:bn,name:"download"}),b(ke,{get children(){return[b($e,{colorScheme:t,onSelect:r,get children(){return e("home.toolbar.batch_download")}}),b(F,{get when(){return Ee.is_admin(De())||ie("package_download")},get children(){return[b($e,{colorScheme:t,onSelect:()=>{Be.emit("tool","package_download")},get children(){return e("home.toolbar.package_download")}}),b($e,{colorScheme:t,onSelect:a,get children(){return e("home.toolbar.playlist_download")}}),b($e,{colorScheme:t,onSelect:o,get children(){return e("home.toolbar.send_aria2")}})]}})]}})]}})},Fn=H((()=>N((()=>t.import("./PackageDownload-legacy-3618a8d5.js")),void 0))),kn=()=>{const e=n(),t=e=>{if("package_download"===e){if(!ie("package_download"))return;o()}};Be.on("tool",t),f((()=>{Be.off("tool",t)}));const{isOpen:r,onOpen:o,onClose:a}=Ge(),[l,i]=p("pre_tips");return b(A,{blockScrollOnMount:!1,get opened(){return r()},onClose:a,closeOnOverlayClick:!1,closeOnEsc:!1,get children(){return[b(w,{}),b(y,{get children(){return[b(_,{get children(){return e("home.toolbar.package_download")}}),b(G,{get fallback(){return b(K,{})},get children(){return b(F,{get when(){return"pre_tips"===l()},get fallback(){return b(Fn,{onClose:a})},get children(){return[b(v,{get children(){var t=_n();return Ke(t,(()=>e("home.toolbar.pre_package_download-tips"))),t}}),b(x,{display:"flex",gap:"$2",get children(){return[b(S,{onClick:a,colorScheme:"neutral",get children(){return e("global.cancel")}}),b(S,{colorScheme:"info",onClick:()=>{i("package_download")},get children(){return e("global.confirm")}})]}})]}})}})]}})]}})},$n=()=>{const e=E((()=>[Z.Folder,Z.FetchingMore].includes(Y.state)&&Je()&&Xe()));return b(Ze,{exitBeforeEnter:!0,get children(){return b(F,{get when(){return le((()=>!!e()))()&&Ee.is_admin(De())},get children(){return b(ce,{class:"center-toolbar",pos:"fixed",bottom:"$5",right:"50%",w:"max-content",color:"$neutral11",get as(){return me.div},initial:{opacity:0,scale:0,x:"50% ",y:100},animate:{opacity:1,scale:1,x:"50%",y:0},exit:{opacity:0,scale:0,x:"50% ",y:100},transition:{duration:.2},get children(){return b(Ae,{p:"$2",get bgColor(){return P("white","#000000d0")()},spacing:"$1",shadow:"0px 10px 30px -5px rgba(0, 0, 0, 0.3)",rounded:"$lg",css:{backdropFilter:"blur(15px)"},get children(){return[b(F,{get when(){return Xe()},get children(){return b(Ye,{colorScheme:"warning",get children(){return a().length}})}}),b(O,{each:["rename","move","copy","delete","decompress"],children:e=>b(bn,{name:e,onClick:()=>{Be.emit("tool",e)}})}),b(yn,{}),b(vn,{}),b(bn,{name:"cancel_select",onClick:()=>{Qe(!1)}})]}})}})}})}})},Cn=()=>{const{isOpen:e,onToggle:t}=Ge({defaultIsOpen:"true"===localStorage.getItem("more-open"),onClose:()=>localStorage.setItem("more-open","false"),onOpen:()=>localStorage.setItem("more-open","true")}),r=E((()=>e()?"$4":"$5")),n=E((()=>Y.state===Z.Folder)),{refresh:o}=D();return b(ce,{class:"right-toolbar-box",pos:"fixed",get right(){return r()},get bottom(){return r()},get children(){return b(F,{get when(){return e()},get fallback(){return b(wn,{class:"toolbar-toggle",tips:"more",as:hr,onClick:()=>{t()}})},get children(){return b(re,{class:"right-toolbar",p:"$1",rounded:"$lg",spacing:"$1",bgColor:"$neutral1",get as(){return me.div},initial:{opacity:0,scale:0,y:300},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0,y:300},transition:{duration:.2},get children(){return[b(re,{spacing:"$1",class:"right-toolbar-in",get children(){return[b(F,{get when(){return le((()=>!!n()))()&&(et("write")||Y.write)},get children(){return[b(wn,{as:tt,tips:"upload",onClick:()=>{Be.emit("tool","upload")}}),b(wn,{get as(){return fn.new_file.icon},tips:"new_file",onClick:()=>{Be.emit("tool","new_file")}}),b(wn,{get as(){return fn.mkdir.icon},p:"$1_5",tips:"mkdir",onClick:()=>{Be.emit("tool","mkdir")}}),b(wn,{get as(){return fn.recursive_move.icon},tips:"recursive_move",onClick:()=>{Be.emit("tool","recursiveMove")}}),b(wn,{get as(){return fn.batch_rename.icon},tips:"batch_rename",onClick:()=>{Qe(!0),Be.emit("tool","batchRename")}})]}}),b(F,{get when(){return le((()=>!!n()))()&&et("offline_download")},get children(){return b(wn,{as:rr,pl:"0",tips:"offline_download",onClick:()=>{Be.emit("tool","offline_download")}})}}),b(F,{get when(){return rt()},get children(){return b(wn,{as:pr,tips:"toggle_markdown_toc",onClick:()=>{nt((e=>!e))}})}}),b(wn,{as:yr,tips:"refresh",onClick:()=>{o(void 0,!0),ot.show({status:"success",description:"目录刷新成功",closable:!1})}}),b(F,{get when(){return Ee.is_admin(De())},get children(){return[b(wn,{tips:"toggle_checkbox",as:mr,onClick:at}),b(wn,{as:lt,tips:"browser_setting",onClick:()=>{Be.emit("tool","local_settings")}})]}})]}}),b(wn,{tips:"close",as:hr,onClick:t})]}})}})}})},xn=()=>{const e=n(),{isOpen:t,onOpen:r,onClose:l}=Ge(),[i,c]=it(ct),{pathname:s}=o(),{refresh:u}=D(),[d,g]=p(!1),h=e=>{"copy"===e&&(r(),g(!1))};return Be.on("tool",h),f((()=>{Be.off("tool",h)})),b(wr,{get header(){return e("home.toolbar.choose_dst_folder")},get opened(){return t()},onClose:l,get loading(){return i()},get footerSlot(){return b(st,{mr:"auto",get checked(){return d()},onChange:()=>{g(!d())},get children(){return e("home.conflict_policy.overwrite_existing")}})},onSubmit:async e=>{const t=await c(s(),e,a().map((e=>e.name)),d());ut(t,(()=>{u(),l()}))}})},Sn=()=>{const e=n(),{isOpen:t,onOpen:r,onClose:l}=Ge(),[i,c]=it(dt),{pathname:s}=o(),{refresh:u}=D(),[d,g]=p(!1),h=e=>{"move"===e&&(r(),g(!1))};return Be.on("tool",h),f((()=>{Be.off("tool",h)})),b(wr,{get header(){return e("home.toolbar.choose_dst_folder")},get opened(){return t()},onClose:l,get loading(){return i()},get footerSlot(){return b(st,{mr:"auto",get checked(){return d()},onChange:()=>{g(!d())},get children(){return e("home.conflict_policy.overwrite_existing")}})},onSubmit:async e=>{const t=await c(s(),e,a().map((e=>e.name)),d());ut(t,(()=>{u(),l()}))}})};var An=je("<p>");const En=()=>{const e=n(),{isOpen:t,onOpen:r,onClose:l}=Ge(),[i,c]=it(gt),{refresh:s}=D(),{pathname:u}=o(),d=e=>{"delete"===e&&r()};return Be.on("tool",d),f((()=>{Be.off("tool",d)})),b(A,{blockScrollOnMount:!1,get opened(){return t()},onClose:l,size:{"@initial":"xs","@md":"md"},get children(){return[b(w,{}),b(y,{get children(){return[b(_,{get children(){return e("home.toolbar.delete")}}),b(v,{get children(){var t=An();return Ke(t,(()=>e("home.toolbar.delete-tips"))),t}}),b(x,{display:"flex",gap:"$2",get children(){return[b(S,{onClick:l,colorScheme:"neutral",get children(){return e("global.cancel")}}),b(S,{colorScheme:"danger",get loading(){return i()},onClick:async()=>{const e=await c(u(),a().map((e=>e.name)));ut(e,(()=>{s(),l()}))},get children(){return e("global.confirm")}})]}})]}})]}})},Dn=()=>{const e=n(),{isOpen:t,onOpen:r,onClose:l}=Ge(),[i,c]=it(ht),{pathname:u}=o(),{refresh:d}=D(),[g,h]=p(!1),m=e=>{if("rename"===e){if(!pt())return void Be.emit("tool","batchRename");r(),h(!1)}};return Be.on("tool",m),f((()=>{Be.off("tool",m)})),b(F,{get when(){return t()},get children(){return b(kr,{title:"home.toolbar.input_new_name",get footerSlot(){return b(st,{mr:"auto",get checked(){return g()},onChange:()=>{h(!g())},get children(){return e("home.conflict_policy.overwrite_existing")}})},get isRenamingFile(){return!a()[0].is_dir},get opened(){return t()},onClose:l,get defaultValue(){return a()[0]?.name??""},get loading(){return i()},onSubmit:async e=>{const t=await c(s(u(),a()[0].name),e,g());ut(t,(()=>{d(),l()}))}})}})},Mn=()=>{const e=n(),{isOpen:t,onOpen:r,onClose:a}=Ge(),[l,i]=it(mt),{refresh:c}=D(),{pathname:u}=o(),[d,h]=p(!1),m=e=>{"new_file"===e&&(r(),h(!1))};return Be.on("tool",m),f((()=>{Be.off("tool",m)})),b(kr,{title:"home.toolbar.input_filename",get footerSlot(){return b(st,{mr:"auto",get checked(){return d()},onChange:()=>{h(!d())},get children(){return e("home.conflict_policy.overwrite_existing")}})},get opened(){return t()},onClose:a,get loading(){return l()},onSubmit:async e=>{const t=await i(s(u(),e),g(),d());ut(t,(()=>{c(),a()}))}})},On=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ge(),[n,a]=it(ft),{pathname:l}=o(),{refresh:i}=D(),c=e=>{"mkdir"===e&&t()};return Be.on("tool",c),f((()=>{Be.off("tool",c)})),b(kr,{title:"home.toolbar.input_dir_name",get opened(){return e()},onClose:r,get loading(){return n()},onSubmit:async e=>{const t=await a(s(l(),e));ut(t,(()=>{i(),r()}))}})};var Bn=je("<p>");const zn=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ge(),{isOpen:a,onOpen:l,onClose:i}=Ge(),[c,s]=it(bt),{pathname:u}=o(),{refresh:d}=D(),[g,h]=p("cancel"),m=e=>{"recursiveMove"===e&&(t(),h("cancel"))};Be.on("tool",m),f((()=>{Be.off("tool",m)}));const F=n();return[b(A,{blockScrollOnMount:!1,get opened(){return e()},onClose:()=>r(),size:{"@initial":"xs","@md":"md"},get children(){return[b(w,{}),b(y,{get children(){return[b(_,{get children(){return F("home.toolbar.recursive_move")}}),b(v,{get children(){var e=Bn();return Ke(e,(()=>F("home.toolbar.recursive_move_directory-tips"))),e}}),b(x,{display:"flex",gap:"$2",get children(){return[b(S,{onClick:()=>r(),colorScheme:"neutral",get children(){return F("global.cancel")}}),b(S,{onClick:()=>{r(),l()},colorScheme:"danger",get children(){return F("global.confirm")}})]}})]}})]}}),b(wr,{get header(){return F("home.toolbar.choose_dst_folder")},get opened(){return a()},onClose:i,get loading(){return c()},get footerSlot(){return b(Ae,{mr:"auto",flex:"0.8",spacing:"$1",get children(){return b(wt,{get value(){return g()},onChange:e=>h(e),get children(){return[b(yt,{value:"cancel",get children(){return F("home.conflict_policy.cancel_if_exists")}}),b(yt,{value:"overwrite",get children(){return F("home.conflict_policy.overwrite_existing")}}),b(yt,{value:"skip",get children(){return F("home.conflict_policy.skip_existing")}})]}})}})},onSubmit:async e=>{const t=await s(u(),e,g());ut(t,(()=>{d(),i()}))}})]};var jn=je("<p>");const In=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ge(),{pathname:a}=o(),[l,i]=it(_t),{refresh:c}=D(),s=e=>{"removeEmptyDirectory"===e&&t()};Be.on("tool",s),f((()=>{Be.off("tool",s)}));const u=n();return b(A,{blockScrollOnMount:!1,get opened(){return e()},onClose:r,size:{"@initial":"xs","@md":"md"},get children(){return[b(w,{}),b(y,{get children(){return[b(_,{get children(){return u("home.toolbar.remove_empty_directory")}}),b(v,{get children(){var e=jn();return Ke(e,(()=>u("home.toolbar.remove_empty_directory-tips"))),e}}),b(x,{display:"flex",gap:"$2",get children(){return[b(S,{onClick:r,colorScheme:"neutral",get children(){return u("global.cancel")}}),b(S,{colorScheme:"danger",get loading(){return l()},onClick:async()=>{const e=await i(a());ut(e,(()=>{c(),r()}))},get children(){return u("global.confirm")}})]}})]}})]}})},Ln=e=>b(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return b(Ae,{class:"list-item",w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:I()}},get children(){return[b(te,{w:{"@initial":"50%","@md":"50%"},class:"name",css:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},get title(){return e.obj.src_name},get children(){return e.obj.src_name}}),b(te,{w:{"@initial":"50%","@md":"50%"},class:"name",css:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},get title(){return e.obj.new_name},get children(){return e.obj.new_name}})]}})}});var Rn=je("<p>");const Vn=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ge(),{isOpen:i,onOpen:c,onClose:s}=Ge(),[u,d]=it(vt),{pathname:g}=o(),{refresh:h}=D(),[m,$]=p("1"),[C,E]=p(""),[B,z]=p(""),[j,I]=p("string"),[L,R]=p([]),V=n(),T=()=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:"left",cursor:"pointer"}),U=e=>{"batchRename"===e&&c()};Be.on("tool",U),f((()=>{Be.off("tool",U)}));const H=()=>{if(!C()||!B())return void l.warning(V("global.empty_input"));const e=new RegExp(C(),"g");let r;if("1"===m())r=a().filter((e=>e.name.match(C()))).map((t=>{const r=new Date(t.created),n=new Date(t.modified);return{src_name:t.name,new_name:t.name.replace(e,B()).replace("{created_year}",r.getFullYear().toString().padStart(4,"0")).replace("{created_month}",(r.getMonth()+1).toString().padStart(2,"0")).replace("{created_date}",r.getDate().toString().padStart(2,"0")).replace("{created_hour}",r.getHours().toString().padStart(2,"0")).replace("{created_minute}",r.getMinutes().toString().padStart(2,"0")).replace("{created_second}",r.getSeconds().toString().padStart(2,"0")).replace("{modified_year}",n.getFullYear().toString().padStart(4,"0")).replace("{modified_month}",(n.getMonth()+1).toString().padStart(2,"0")).replace("{modified_date}",n.getDate().toString().padStart(2,"0")).replace("{modified_hour}",n.getHours().toString().padStart(2,"0")).replace("{modified_minute}",n.getMinutes().toString().padStart(2,"0")).replace("{modified_second}",n.getSeconds().toString().padStart(2,"0"))}}));else{let e=B();r=a().map((t=>{let r="";const n=t.name.lastIndexOf(".");-1!==n&&(r=t.name.substring(n+1));const o={src_name:t.name,new_name:C()+e+"."+r};return e=(parseInt(e)+1).toString().padStart(e.length,"0"),o}))}R(r),t(),s()};return[b(A,{blockScrollOnMount:!1,get opened(){return i()},onClose:s,initialFocus:"#modal-input1",size:{"@initial":"xs","@md":"md"},get children(){return[b(w,{}),b(y,{get children(){return[b(_,{get children(){return V("home.toolbar.batch_rename")}}),b(v,{get children(){return[b(Ft,{defaultValue:"1",onChange:e=>{$(e),"1"===e?I("string"):"2"===e&&I("number")},get children(){return b(Ae,{spacing:"$4",get children(){return[b(kt,{value:"1",get children(){return V("home.toolbar.regex_rename")}}),b(kt,{value:"2",get children(){return V("home.toolbar.sequential_renaming")}})]}})}}),b(re,{spacing:"$2",get children(){return[(e=Rn(),e.style.setProperty("margin","10px 0"),Ke(e,b(F,{get when(){return"1"===m()},get children(){return V("home.toolbar.regular_rename")}}),null),Ke(e,b(F,{get when(){return"2"===m()},get children(){return V("home.toolbar.sequential_renaming_desc")}}),null),e),b(k,{id:"modal-input1",type:"string",get value(){return C()},onInput:e=>{E(e.currentTarget.value)},onKeyDown:e=>{"Enter"===e.key&&H()}}),b(k,{id:"modal-input2",get type(){return j()},get value(){return B()},onInput:e=>{z(e.currentTarget.value)},onKeyDown:e=>{"Enter"===e.key&&H()}})];var e}})]}}),b(x,{display:"flex",gap:"$2",get children(){return[b(S,{onClick:()=>{$("1"),I("string"),s()},colorScheme:"neutral",get children(){return V("global.cancel")}}),b(S,{onClick:()=>H(),get disabled(){return!C()||!B()},get children(){return V("global.ok")}})]}})]}})]}}),b(A,{size:"xl",get opened(){return e()},onClose:r,get children(){return[b(w,{}),b(y,{get children(){return[b(_,{get children(){return V("home.toolbar.regex_rename_preview")}}),b(v,{get children(){return b(re,{class:"list",w:"$full",spacing:"$1",get children(){return[b(Ae,{class:"title",w:"$full",p:"$2",get children(){return[b(te,M({w:{"@initial":"50%","@md":"50%"}},T,{get children(){return V("home.toolbar.regex_rename_preview_old_name")}})),b(te,M({w:{"@initial":"50%","@md":"50%"}},T,{get children(){return V("home.toolbar.regex_rename_preview_new_name")}}))]}}),b(O,{get each(){return L()},children:(e,t)=>b(Ln,{obj:e,get index(){return t()}})})]}})}}),b(x,{display:"flex",gap:"$2",get children(){return[b(S,{onClick:()=>{R([]),$("1"),I("string"),r(),s()},colorScheme:"neutral",get children(){return V("global.cancel")}}),b(S,{onClick:()=>{R([]),r(),c()},colorScheme:"neutral",get children(){return V("global.back")}}),b(S,{get loading(){return u()},onClick:async()=>{const e=await d(g(),L());ut(e,(()=>{R([]),E(""),z(""),$("1"),I("string"),h(),s(),r()}))},get disabled(){return 0==L().length},get children(){return V("global.ok")}})]}})]}})]}})]},Tn="0123456789abcdef",Un=[];
/* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
      *
      * @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
      * @license  MIT
      */for(let e=0;e<256;e++)Un[e]=Tn[e>>4&15]+Tn[15&e];const Hn=e=>{const t=e.length;let r="",n=0;for(;n<t;)r+=Un[e[n++]];return r};for(var Nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pn="undefined"==typeof Uint8Array?[]:new Uint8Array(256),qn=0;qn<64;qn++)Pn[Nn.charCodeAt(qn)]=qn;const Wn=new TextDecoder,Gn=(e,t)=>t?new TextDecoder(t).decode(e):Wn.decode(e),Kn=new TextEncoder,Jn=e=>Kn.encode(e),Xn="undefined"!=typeof window?window:self,Yn=Xn.crypto||Xn.msCrypto||{};function Qn(e){const t=e<0?1:0;return e=Math.abs(Number(e||1)),Math.floor(Math.log10(e))+1+t}function Zn(e){return ArrayBuffer.isView(e)?"arraybufferview":Array.isArray(e)?"array":e instanceof Number?"number":e instanceof Boolean?"boolean":e instanceof Set?"set":e instanceof Map?"map":e instanceof String?"string":e instanceof ArrayBuffer?"arraybuffer":typeof e}function eo(e,t,r){const n=[];let o=null;return eo._encode(n,e),o=((e,t=0)=>{const r=e.length||0;if(!t){let n=r;for(;n--;)t+=e[n].length}const n=new Uint8Array(t);let o=t,a=r;for(;a--;)o-=e[a].length,n.set(e[a],o);return n})(n),eo.bytes=o.length,ArrayBuffer.isView(t)?(t.set(o,r),t):o}Yn.subtle||Yn.webkitSubtle,eo.bytes=-1,eo._floatConversionDetected=!1,eo._encode=function(e,t){if(null!=t)switch(Zn(t)){case"object":eo.dict(e,t);break;case"map":eo.dictMap(e,t);break;case"array":eo.list(e,t);break;case"set":eo.listSet(e,t);break;case"string":eo.string(e,t);break;case"number":case"boolean":eo.number(e,t);break;case"arraybufferview":eo.buffer(e,new Uint8Array(t.buffer,t.byteOffset,t.byteLength));break;case"arraybuffer":eo.buffer(e,new Uint8Array(t))}};const to=new Uint8Array([101]),ro=new Uint8Array([100]),no=new Uint8Array([108]);function oo(e,t,r){let n=0,o=1;for(let a=t;a<r;a++){const r=e[a];if(r<58&&r>=48)n=10*n+(r-48);else if(a!==t||43!==r){if(a!==t||45!==r){if(46===r)break;throw new Error("not a number: buffer["+a+"] = "+r)}o=-1}}return n*o}function ao(e,t,r,n){return null==e||0===e.length?null:("number"!=typeof t&&null==n&&(n=t,t=void 0),"number"!=typeof r&&null==n&&(n=r,r=void 0),ao.position=0,ao.encoding=n||null,ao.data=ArrayBuffer.isView(e)?new Uint8Array(e.slice(t,r)):Jn(e),ao.bytes=ao.data.length,ao.next())}function lo(e){if(null==e)return 0;const t=Zn(e);switch(t){case"arraybufferview":return function(e){const t=e.byteLength-e.byteOffset;return Qn(t)+1+t}(e);case"string":return function(e){const t=Jn(e).byteLength;return Qn(t)+1+t}(e);case"array":case"set":return function(e){let t=2;for(const r of e)t+=lo(r);return t}(e);case"number":return 1+Qn(Math.floor(e))+1;case"bigint":return 1+e.toString().length+1;case"object":return function(e){let t=2;const r=Object.keys(e);for(let n=0;n<r.length;n++){const o=Jn(r[n]).byteLength;t+=Qn(o)+1+o,t+=lo(e[r[n]])}return t}(e);case"map":return function(e){let t=2;for(const[r,n]of e){const e=Jn(r).byteLength;t+=Qn(e)+1+e,t+=lo(n)}return t}(e);default:throw new TypeError(`Unsupported value of type "${t}"`)}}eo.buffer=function(e,t){e.push(Jn(t.length+":"),t)},eo.string=function(e,t){e.push(Jn(Jn(t).byteLength+":"+t))},eo.number=function(e,t){if(Number.isInteger(t))return e.push(Jn("i"+BigInt(t)+"e"));const r=2147483648,n=(t/r|0)*r+(t%r|0);e.push(Jn("i"+n+"e")),n===t||eo._floatConversionDetected||(eo._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+t+'":','Bencoding only defines support for integers, value was converted to "'+n+'"'),console.trace())},eo.dict=function(e,t){e.push(ro);let r,n=0;const o=Object.keys(t).sort(),a=o.length;for(;n<a;n++)r=o[n],null!=t[r]&&(eo.string(e,r),eo._encode(e,t[r]));e.push(to)},eo.dictMap=function(e,t){e.push(ro);const r=Array.from(t.keys()).sort();for(const n of r)null!=t.get(n)&&(ArrayBuffer.isView(n)?eo._encode(e,n):eo.string(e,String(n)),eo._encode(e,t.get(n)));e.push(to)},eo.list=function(e,t){let r=0;const n=t.length;for(e.push(no);r<n;r++)null!=t[r]&&eo._encode(e,t[r]);e.push(to)},eo.listSet=function(e,t){e.push(no);for(const r of t)null!=r&&eo._encode(e,r);e.push(to)},ao.bytes=0,ao.position=0,ao.data=null,ao.encoding=null,ao.next=function(){switch(ao.data[ao.position]){case 100:return ao.dictionary();case 108:return ao.list();case 105:return ao.integer();default:return ao.buffer()}},ao.find=function(e){let t=ao.position;const r=ao.data.length,n=ao.data;for(;t<r;){if(n[t]===e)return t;t++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(e)+'" [0x'+e.toString(16)+"]")},ao.dictionary=function(){ao.position++;const e={};for(;101!==ao.data[ao.position];){const t=ao.buffer();let r=Gn(t);r.includes("�")&&(r=Hn(t)),e[r]=ao.next()}return ao.position++,e},ao.list=function(){ao.position++;const e=[];for(;101!==ao.data[ao.position];)e.push(ao.next());return ao.position++,e},ao.integer=function(){const e=ao.find(101),t=oo(ao.data,ao.position+1,e);return ao.position+=e+1-ao.position,t},ao.buffer=function(){let e=ao.find(58);const t=oo(ao.data,ao.position,e),r=++e+t;return ao.position=r,ao.encoding?Gn(ao.data.slice(e,r)):ao.data.slice(e,r)};const io={encode:eo,decode:ao,byteLength:lo,encodingLength:lo},co=["delete_on_upload_succeed","delete_on_upload_failed","delete_never","delete_always"];function so(e){return _r.enc.Utf8.stringify(_r.lib.WordArray.create(e))}function uo(e){const t=io.decode(e),r=io.encode(t.info),n=_r.SHA1(_r.lib.WordArray.create(r)).toString();let o={};return Number.isInteger(t?.info?.length)&&(o.xl=t.info.length),t.info.name&&(o.dn=so(t.info.name)),t.announce&&(o.tr=so(t.announce)),`magnet:?xt=urn:btih:${n}&${new URLSearchParams(o).toString()}`}const go=()=>{const e=n(),[t,r]=p([]),[a,l]=it((()=>$t.get("/public/offline_download_tools"))),[i,c]=p(""),[s,u]=p("delete_on_upload_succeed");pe((async()=>{const e=await l();Ct(e,(e=>{r(e),c(e[0])}))}));const{isOpen:d,onOpen:g,onClose:h}=Ge(),[m,w]=it(xt),{pathname:y}=o(),_=e=>{"offline_download"===e&&g()};return Be.on("tool",_),f((()=>{Be.off("tool",_)})),b(kr,{title:"home.toolbar.offline_download",type:"text",get opened(){return d()},onClose:h,get loading(){return a()||m()},get tips(){return e("home.toolbar.offline_download-tips")},onDrop:async(e,t)=>{if(e.preventDefault(),e.dataTransfer?.files.length){const n=[];for(const t of e.dataTransfer.files)if(t.name.toLowerCase().endsWith(".torrent"))try{const e=await t.arrayBuffer();n.push(uo(new Uint8Array(e)))}catch(r){console.error("Failed to convert torrent file to magnet link:",r)}n.length&&t(n.join("\n"))}},get topSlot(){return b(ce,{mb:"$2",get children(){return b(St,{get value(){return i()},onChange:e=>c(e),get options(){return t().map((e=>({value:e,label:e})))}})}})},get bottomSlot(){return b(ce,{mb:"$2",get children(){return b(St,{get value(){return s()},onChange:e=>u(e),get options(){return co.map((t=>({value:t,label:e(`home.toolbar.delete_policy.${t}`)})))}})}})},onSubmit:async e=>{const t=await w(y(),e.split("\n"),i(),s());ut(t,(()=>{h()}))}})},ho=e=>{const t=n(),r=t=>{t===e.name&&a()};Be.on("tool",r),f((()=>{Be.off("tool",r)}));const{isOpen:o,onOpen:a,onClose:l}=Ge();return b(A,{get blockScrollOnMount(){return e.blockScrollOnMount},get opened(){return o()},onClose:l,closeOnOverlayClick:!1,closeOnEsc:!1,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[b(w,{}),b(y,{get children(){return[b(At,{}),b(_,{get children(){return t(e.title)}}),b(v,{get children(){return b(F,{get when(){return o()},get children(){return b(G,{get fallback(){return b(K,{})},get children(){return e.children}})}})}})]}})]}})};function po(e){const t=n();return b(Xt,{get children(){return[b(Lt,{get children(){return t(`home.local_settings.${e.key}`)}}),b(J,{get fallback(){return b(k,{get value(){return h[e.key]},onInput:t=>{Rt(e.key,t.currentTarget.value)}})},get children(){return[b(X,{get when(){return"select"===e.type},get children(){return b(Vt,{get id(){return e.key},get defaultValue(){return h[e.key]},onChange:t=>Rt(e.key,t),get children(){return[b(Tt,{get children(){return[b(Ut,{get children(){return t("global.choose")}}),b(Ht,{}),b(Nt,{})]}}),b(Pt,{get children(){return b(qt,{get children(){return b(O,{get each(){return le((()=>"function"==typeof e.options))()?e.options():e.options},children:r=>b(Wt,{value:r,get children(){return[b(Gt,{get children(){return t(`home.local_settings.${e.key}_options.${r}`)}}),b(Kt,{})]}})})}})}})]}})}}),b(X,{get when(){return"boolean"===e.type},get children(){return b(Jt,{get defaultChecked(){return"true"===h[e.key]},onChange:t=>{Rt(e.key,t.currentTarget.checked.toString())}})}})]}})]}})}const mo=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ge(),o=n(),a=e=>{"local_settings"===e&&t()};return Be.on("tool",a),f((()=>{Be.off("tool",a)})),b(It,{get opened(){return e()},placement:"right",onClose:r,get children(){return[b(Et,{}),b(Dt,{get children(){return[b(Mt,{}),b(Ot,{color:"$info9",get children(){return o("home.toolbar.local_settings")}}),b(Bt,{get children(){return[b(re,{spacing:"$2",get children(){return b(O,{get each(){return zt.filter((e=>!e.hidden))},children:e=>b(po,e)})}}),b(ze,{mt:"$4",get children(){return b(Ae,{spacing:"$4",p:"$2",color:"$neutral11",get children(){return[b(nr,{}),b(Pe,{as:fr,cursor:"pointer",boxSize:"$8",onClick:()=>{localStorage.removeItem("hope-ui-color-mode"),ot.show({status:"success",description:o("home.toolbar.local_settings_auto"),closable:!1}),setTimeout((function(){location.reload()}),2500)}}),b(jt,{})]}})}})]}})]}})]}})};var fo=je("<div>");const bo=()=>{const e=n(),{isOpen:t,onOpen:r,onClose:l}=Ge(),[i,c]=it(Yt),{pathname:s}=o(),{refresh:u}=D(),[d,g]=p(""),[h,m]=p(""),[w,y]=p(!0),[_,v]=p(!1),F=e=>{"decompress"===e&&(Qt((()=>{y(!0),g("/"),m("")})),r())},$=e=>{const{inner:t,pass:n}=JSON.parse(e);Qt((()=>{y(!1),g(t),m(n)})),r()};return Be.on("tool",F),Be.on("extract",$),f((()=>{Be.off("tool",F),Be.off("extract",$)})),b(wr,{get header(){return"/"===d()?e("home.toolbar.choose_dst_folder"):e("home.toolbar.archive.extract_header",{path:d()})},get opened(){return t()},onClose:l,get loading(){return i()},onSubmit:async e=>{const{path:t,name:r}=(()=>{let e=s();if("/"===d())return{path:e,name:a().map((e=>e.name))};{let t=e.lastIndexOf("/");return{path:e.slice(0,t),name:[e.slice(t+1)]}}})(),n=await c(t,e,r,h(),d(),w(),_());ut(n,(()=>{u(),l()}))},get children(){return b(re,{spacing:"$1",alignItems:"flex-start",get children(){return[b(Ae,{width:"100%",spacing:"$1",get children(){return[b(te,{size:"sm",css:{whiteSpace:"nowrap"},get children(){return e("home.toolbar.decompress-pass")}}),b(k,{get value(){return h()},onInput:e=>m(e.target.value),size:"sm",flexGrow:"1"})]}}),b(st,{get checked(){return w()},onChange:e=>y(e.target.checked),get children(){return e("home.toolbar.decompress-cache-full")}}),b(st,{get checked(){return _()},onChange:e=>v(e.target.checked),get children(){return e("home.toolbar.decompress-put-into-new")}}),fo()]}})}})},wo=H((()=>N((()=>t.import("./Upload-legacy-c15eacdb.js")),void 0))),yo=()=>[b(xn,{}),b(Sn,{}),b(Dn,{}),b(En,{}),b(bo,{}),b(Mn,{}),b(On,{}),b(zn,{}),b(In,{}),b(Vn,{}),b(go,{}),b(kn,{}),b(ho,{name:"upload",title:"home.toolbar.upload",get children(){return b(wo,{})}}),b(mo,{})],_o=()=>b(er,{get children(){return[b(Cn,{}),b($n,{}),b(yo,{}),b(Zt,{})]}}),vo=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{or(U("site_title"));const e=U("announcement");return e&&l.render((()=>b(ue,{children:e}))),[b(mn,{}),b(_o,{}),b(jr,{}),b(Ir,{})]}},Symbol.toStringTag,{value:"Module"}));e("L",vo)}}}));
