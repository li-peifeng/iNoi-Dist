System.register(["./index-legacy-4ff8c94f.js","./index-legacy-c8a90fd5.js","./DeletePopover-legacy-2cfbaf82.js"],function(e,r){"use strict";var t,n,a,l,g,i,s,d,c,o,u,h,b,m,$,p,f,w,v,k,_,y,C,x,S,B,D,j,q,H,X,G,I,K,L,T,W,A,E,F,J,M,O,P;return{setters:[e=>{t=e.b,n=e.y,a=e.Z,l=e.aq,g=e.aA,i=e.a9,s=e.aX,d=e.ae,c=e.ag,o=e.aa,u=e.ds,h=e.dp,b=e.d,m=e.b5,$=e.bm,p=e.D,f=e.b8,w=e.bn,v=e.n,k=e.q,_=e.G,y=e.ci,C=e.S,x=e.bB,S=e.bC,B=e.bD,D=e.bE,j=e.bF,q=e.bG,H=e.bH,X=e.K,G=e.bI,I=e.bJ,K=e.bK,L=e.bL,T=e.a3,W=e.a4,A=e.dc,E=e.dm,F=e.dn,J=e.dq,M=e.dr},e=>{O=e.e},e=>{P=e.D}],execute:function(){function r(e){const r=t(),{to:a}=b(),[l,g]=m(()=>$.post(`/admin/storage/delete?id=${e.storage.id}`)),[i,s]=m(()=>$.post(`/admin/storage/${e.storage.disabled?"enable":"disable"}?id=${e.storage.id}`));return[n(p,{onClick:()=>{a(`/@manage/storages/edit/${e.storage.id}`)},get children(){return r("global.edit")}}),n(p,{get loading(){return i()},get colorScheme(){return e.storage.disabled?"success":"warning"},onClick:async()=>{const r=await s();f(r,()=>{e.refresh()})},get children(){return r("global."+(e.storage.disabled?"enable":"disable"))}}),n(P,{get name(){return e.storage.mount_path},get loading(){return l()},onClick:async()=>{const t=await g();w(t,()=>{v.success(r("global.delete_success")),e.refresh()})}})]}function Z(e){const u=t();return n(o,{w:"$full",spacing:"$2",rounded:"$lg",border:"1px solid $neutral7",get background(){return a("$neutral2","$neutral3")()},p:"$3",get _hover(){return{border:`1px solid ${l()}`}},get children(){return[n(g,{spacing:"$2",get children(){return[n(i,{fontWeight:"$medium",css:{wordBreak:"break-all"},get children(){return e.storage.mount_path}}),n(s,{colorScheme:"info",get children(){return u(`drivers.drivers.${e.storage.driver}`)}})]}}),n(g,{get children(){return[n(i,{get children(){return[d(()=>u("storages.common.status")),":Â "]}}),n(c,{css:{wordBreak:"break-all"},overflowX:"auto",get innerHTML(){return e.storage.status}})]}}),n(i,{css:{wordBreak:"break-all"},get children(){return e.storage.remark}}),n(g,{spacing:"$2",get children(){return n(r,e)}})]}})}function z(e){const a=t();return n(h,{get children(){return[n(u,{get children(){return e.storage.mount_path}}),n(u,{get children(){return a(`drivers.drivers.${e.storage.driver}`)}}),n(u,{get children(){return e.storage.order}}),n(u,{get children(){return e.storage.status}}),n(u,{get children(){return e.storage.remark}}),n(u,{get children(){return n(g,{spacing:"$2",get children(){return n(r,e)}})}})]}})}e("default",()=>{const e=t();O("manage.sidemenu.storages");const{to:r}=b(),[a,l]=m(()=>$.get("/admin/storage/list")),[i,s]=k([]),d=async()=>{const e=await l();w(e,e=>s(e.content))},[u,f]=k([]),[P,N]=k([]);(async()=>{const e=await $.get("/admin/driver/names");w(e,e=>f(e))})(),d();const Q=async()=>{const r=await $.post("/admin/storage/load_all");w(r,()=>{v.success(e("storages.other.start_load_success"))})},R=_(()=>i().filter(e=>0===P().length||P().includes(e.driver))),[U,V]=y("storages-layout","grid");return n(o,{spacing:"$3",alignItems:"start",w:"$full",get children(){return[n(g,{spacing:"$2",gap:"$2",w:"$full",wrap:{"@initial":"wrap","@md":"unset"},get children(){return[n(p,{colorScheme:"accent",get loading(){return a()},onClick:d,get children(){return e("global.refresh")}}),n(p,{onClick:()=>{r("/@manage/storages/add")},get children(){return e("global.add")}}),n(p,{colorScheme:"warning",get loading(){return a()},onClick:Q,get children(){return e("storages.other.load_all")}}),n(C,{get when(){return u().length>0},get children(){return n(x,{multiple:!0,get value(){return P()},onChange:N,get children(){return[n(S,{get children(){return[n(B,{get children(){return e("storages.other.filter_by_driver")}}),n(D,{}),n(j,{})]}}),n(q,{get children(){return n(H,{get children(){return n(X,{get each(){return u()},children:r=>n(G,{value:r,get children(){return[n(I,{get children(){return e(`drivers.drivers.${r}`)}}),n(K,{})]}})})}})}})]}})}}),n(L,{minW:80,get checked(){return"table"===U()},onChange:e=>{V(e.currentTarget.checked?"table":"grid")},get children(){return e("storages.other.table_layout")}})]}}),n(T,{get children(){return[n(W,{get when(){return"grid"===U()},get children(){return n(A,{w:"$full",gap:"$2_5",templateColumns:{"@initial":"1fr","@lg":"repeat(auto-fill, minmax(324px, 1fr))"},get children(){return n(X,{get each(){return R()},children:e=>n(Z,{storage:e,refresh:d})})}})}}),n(W,{get when(){return"table"===U()},get children(){return n(c,{w:"$full",overflowX:"auto",get children(){return n(E,{highlightOnHover:!0,dense:!0,get children(){return[n(F,{get children(){return n(h,{get children(){return[n(X,{each:["mount_path","driver","order","status","remark"],children:r=>n(J,{get children(){return e(`storages.common.${r}`)}})}),n(J,{get children(){return e("global.operations")}})]}})}}),n(M,{get children(){return n(X,{get each(){return R()},children:e=>n(z,{storage:e,refresh:d})})}})]}})}})}})]}})]}})})}}});
