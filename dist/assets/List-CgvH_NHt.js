import{bY as F,Q as W,k as H,E as n,aH as j,S as k,dX as b,b1 as M,aX as R,aM as B,aB as U,ae as c,r as I,cC as G,cD as X,dh as Y,cB as q,ds as Q,bX as O,a0 as v,af as w,au as V,C as S,D as Z,b4 as J,dY as N,dZ as ee,d_ as A,R as f,q as te,d$ as ne,U as re,a9 as ae,e0 as ie,ag as se}from"./index-DzgZRDPa.js";import{b as oe}from"./style-D5VZzlpY.js";import{p as le}from"./index-DngRLgrF.js";import{O as P}from"./obj-H61i4oAB.js";import{g as ce}from"./icon-KIsHFMle.js";import{I as z,u as D}from"./helper-BHPkctX-.js";const r=[{name:"name",textAlign:"left",w:{"@initial":"75%","@md":"50%"}},{name:"size",textAlign:"right",w:{"@initial":"25%","@md":"18%"}},{name:"modified",textAlign:"right",w:{"@initial":0,"@md":"32%"}}],ue=e=>{const{isHide:u}=F();if(u(e.obj))return null;const{setPathAs:d}=W(),{show:o}=oe({id:1}),{pushHref:s,to:l}=H(),{openWithDoubleClick:i,toggleWithClick:a,restoreSelectionCache:x}=D(),_=()=>I.list_item_filename_overflow,g=e.obj.mount_details,K=g&&g.total_space&&g.free_space&&g.total_space>0&&g.free_space>0,T=t=>{let m=t.total_space,$=m-t.free_space;const C=["B","KB","MB","GB","TB","PB"],h=1e3;let y=0;for(;y<C.length-1&&($>=h||m>=h);)$/=h,m/=h,y++;return"".concat($.toFixed(2)," / ").concat(m.toFixed(2)," ").concat(C[y])},p=t=>(t.total_space-t.free_space)/t.total_space*100,E=t=>t.free_space/t.total_space<.1;return n(V.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return n(j,{get classList(){return{selected:!!e.obj.selected}},class:"list-item viselect-item",get"data-index"(){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:v()}},as:le,get href(){return e.obj.name},get cursor(){return i()||a()?"default":"pointer"},get bgColor(){return w(()=>!!e.obj.selected)()?v():void 0},"on:dblclick":()=>{i()&&(b(e.index,!0,!0),l(s(e.obj.name)))},"on:click":t=>{if(t.preventDefault(),!i()&&!(t.ctrlKey||t.metaKey||t.shiftKey)&&x()){if(a())return b(e.index,!e.obj.selected);l(s(e.obj.name))}},onMouseEnter:()=>{d(e.obj.name,e.obj.is_dir,!0)},onContextMenu:t=>{O(()=>{b(e.index,!0,!0)}),o(t,{props:e.obj})},get children(){return[n(j,{class:"name-box",spacing:"$1",get w(){return r[0].w},get children(){return[n(k,{get when(){return M()},get children(){return n(z,{"on:mousedown":t=>{t.stopPropagation()},"on:click":t=>{t.stopPropagation()},get checked(){return e.obj.selected},onChange:t=>{b(e.index,t.target.checked)}})}}),n(R,{class:"icon",boxSize:"$6",get color(){return U()},get as(){return ce(e.obj)},mr:"$1",get cursor(){return e.obj.type!==P.IMAGE?"inherit":"pointer"},"on:click":t=>{e.obj.type===P.IMAGE&&(t.ctrlKey||t.metaKey||t.shiftKey||x()&&(B.emit("gallery",e.obj.name),t.preventDefault(),t.stopPropagation()))}}),n(c,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:_()==="multi_line"?"unset":"nowrap","overflow-x":_()==="scrollable"?"auto":"hidden",textOverflow:_()==="ellipsis"?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),n(k,{get fallback(){return n(c,{class:"size",get w(){return r[1].w},get textAlign(){return r[1].textAlign},get children(){return q(e.obj.size)}})},when:K,get children(){return n(G,{get w(){return r[1].w},class:"disk-usage-percentage",trackColor:"$info3",rounded:"$full",size:"md",get value(){return p(e.obj.mount_details)},get children(){return[n(X,{get color(){return E(e.obj.mount_details)?"$danger6":"$info6"},rounded:"$md"}),n(Y,{class:"disk-usage-text",get children(){return T(e.obj.mount_details)}})]}})}}),n(c,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return r[2].w},get textAlign(){return r[2].textAlign},get children(){return Q(e.obj.modified)}})]}})}})},L=e=>{const u=te(),[d,o]=S(),[s,l]=S(!1);Z(()=>{d()&&e.sortCallback(d(),s())});const i=a=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:a.textAlign,cursor:"pointer",onClick:()=>{a.name===d()?l(!s()):O(()=>{o(a.name),l(!1)})}});return n(j,{class:"title",w:"$full",p:"$2",get children(){return[n(j,{get w(){return r[0].w},spacing:"$1",get children(){return[n(k,{get when(){return w(()=>!e.disableCheckbox)()&&M()},get children(){return n(z,{get checked(){return ee()},get indeterminate(){return N()},onChange:a=>{J(a.target.checked)}})}}),w(()=>w(()=>!!A())()?n(c,f(()=>i(r[0]),{get children(){return A()}})):n(c,f(()=>i(r[0]),{get children(){return u("home.obj.".concat(r[0].name))}})))]}}),n(c,f({get w(){return r[1].w}},()=>i(r[1]),{get children(){return u("home.obj.".concat(r[1].name))}})),n(c,f({get w(){return r[2].w}},()=>i(r[2]),{display:{"@initial":"none","@md":"inline"},get children(){return u("home.obj.".concat(r[2].name))}}))]}})},de=()=>{const e=o=>{var l,i;const s=Array.from((i=(l=o.dataTransfer)==null?void 0:l.items)!=null?i:[]);for(let a=0;a<s.length;a++)if(s[a].kind==="file"){B.emit("tool","upload"),o.preventDefault();break}},{registerSelectContainer:u,captureContentMenu:d}=D();return u(),n(se,{onDragOver:e,"oncapture:contextmenu":d,class:"list viselect-container",w:"$full",spacing:"$1",get children(){return[n(L,{sortCallback:ne}),n(re,{get each(){return ae.objs},children:(o,s)=>n(ue,{obj:o,get index(){return s()}})}),n(k,{get when(){return I.show_count_msg==="visible"},get children(){return n(c,{size:"sm",color:"$neutral11",get children(){return ie()}})}})]}})},je=Object.freeze(Object.defineProperty({__proto__:null,ListTitle:L,default:de},Symbol.toStringTag,{value:"Module"}));export{L,je as a,r as c};
