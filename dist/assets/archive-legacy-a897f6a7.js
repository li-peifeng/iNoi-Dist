System.register(["./index-legacy-8e70bb9a.js","./List-legacy-67e6a63b.js","./index-legacy-970cdb71.js","./Password-legacy-7d2a8e6e.js","./helper-legacy-852b98cd.js","./icon-legacy-664a18e3.js","./style-legacy-88e57403.js","./index-legacy-b550eb38.js","./Layout-legacy-b07142cb.js","./FolderTree-legacy-282e176b.js","./index-legacy-ea843243.js","./index-legacy-c4b303f6.js","./index-legacy-0ab963f3.js"],(function(e,r){"use strict";var t,n,l,a,i,c,o,s,d,u,g,h,p,m,w,f,b,y,x,j,$,k,_,v,C,P,S,z,A,O,q,L,B,I,M,E,F,G,N,U,D,H,J,K,Q,R,T,V,W,X,Y,Z;return{setters:[e=>{t=e.b,n=e.d,l=e.b5,a=e.e0,i=e.e1,c=e.G,o=e.q,s=e.r,d=e.y,u=e.V,g=e.N,h=e.O,p=e.K,m=e.U,w=e.a3,f=e.a4,b=e.a6,y=e.S,x=e.a9,j=e.ae,$=e.ah,k=e.aa,_=e.L,v=e.dc,C=e.aA,P=e.P,S=e.aQ,z=e.aq,A=e.cn,O=e.cA,q=e.an,L=e.d8,B=e.ck,I=e.aP,M=e.aB,E=e.aC,F=e.aF,G=e._,N=e.bO,U=e.e2,D=e.o,H=e.aO},e=>{J=e.L,K=e.c},e=>{Q=e.a,R=e.d},e=>{T=e.default},e=>{V=e.u},e=>{W=e.g},e=>{X=e.x,Y=e.w,Z=e.b},null,null,null,null,null,null],execute:function(){const r=e=>{window.open(e,"_blank")},ee=e=>{const{show:t}=Z({id:2}),{isMouseSupported:n}=V(),l=()=>D.list_item_filename_overflow;return d(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return d(C,{class:"list-item viselect-item",get"data-index"(){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",backgroundColor:P()}},get cursor(){return n()?"default":"pointer"},"on:click":t=>{e.obj.is_dir?e.jumpCallback():e.url&&r(e.url)},onContextMenu:r=>{t(r,{props:e})},get children(){return[d(C,{class:"name-box",spacing:"$1",get w(){return K[0].w},get children(){return[d(S,{class:"icon",boxSize:"$6",get color(){return z()},get as(){return W(e.obj)},mr:"$1"}),d(x,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:"multi_line"===l()?"unset":"nowrap","overflow-x":"scrollable"===l()?"auto":"hidden",textOverflow:"ellipsis"===l()?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),d(x,{class:"size",get w(){return K[1].w},get textAlign(){return K[1].textAlign},get children(){return A(e.obj.size)}}),d(x,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return K[2].w},get textAlign(){return K[2].textAlign},get children(){return O(e.obj.modified)}})]}})}})},re={extract:{icon:Q,color:"$success9"},copy_link:{icon:R,color:"$info9"},download:{icon:H,color:"$primary9"}},te=()=>{const{copy:e}=L(),{colorMode:t}=B();return d(Y,{id:2,animation:"scale",get theme(){return"dark"!==t()?"light":"dark"},style:"z-index: var(--hope-zIndices-popover)",get children(){return[d(X,{hidden:({props:e})=>e.obj.is_dir,onClick:({props:e})=>{r(e.url)},get children(){return d(ne,{name:"download"})}}),d(X,{hidden:({props:e})=>e.obj.is_dir,onClick:({props:r})=>{e(r.url)},get children(){return d(ne,{name:"copy_link"})}}),d(X,{hidden:()=>{const e=I.findIndex((e=>"decompress"===e));return!M.can(E(),e)},onClick:({props:e})=>{F.emit("extract",JSON.stringify({inner:e.innerPath,pass:e.pass}))},get children(){return d(ne,{name:"extract"})}})]}})},ne=e=>{const r=t();return d(C,{spacing:"$2",get children(){return[d(S,{get p(){return re[e.name].p?"$1":void 0},get as(){return re[e.name].icon},boxSize:"$7",get color(){return re[e.name].color}}),d(x,{get children(){return r(`home.toolbar.${e.name}`)}})]}})};e("default",(()=>{const e=t(),{pathname:r}=n(),[C,P]=l(a),[S,z]=l(i),A=c((()=>C()||S()));let O="",q="",L="",B=null;const[I,M]=o(""),[E,F]=o(!1),[D,H]=o(!1),[K,Q]=o(""),[R,V]=o([]),[W,X]=o(),[Y,Z]=o(!1),[re,ne]=o(""),le=function(){let e=!1,r=[];return{acquire:()=>new Promise((t=>{e?r.push(t):(e=!0,t())})),release:()=>{r.length>0?r.shift()():e=!1}}}(),ae=e=>{let r={};return e.forEach((e=>{r[e.name]={...e,children:e.children?ae(e.children):null}})),r},ie=e=>200!==e.code&&(202===e.code?N((()=>{""!==O&&F(!0),H(!0),M("")})):M(e.message),!0),ce=async e=>{if(await le.acquire(),D()&&""===O)return le.release(),[];if(""===q){const e=await P(r(),G(),O);if(ie(e))return le.release(),[];if(null!==e.data.content&&(B=ae(e.data.content)),q=e.data.raw_url,L=e.data.sign,Q(e.data.comment),void 0!==e.data.sort){let r;""!==e.data.sort.order_by&&(r=e.data.sort.order_by);let t="desc"===e.data.sort.order_direction,n=e.data.sort.extract_folder;N((()=>{X(r),Z(t),ne(n)}))}if(e.data.encrypted&&""===O)return N((()=>{H(!0),M("")})),le.release(),[]}if(null===B){const e=await z(r(),G(),O,"/");if(ie(e))return le.release(),[];B=ae(e.data.content)}let t=B;for(let n=0;n<e.length;n++){if(null===t[e[n]].children){const l=await z(r(),G(),O,"/"+e.slice(0,n+1).join("/"));if(ie(l))return le.release(),[];t[e[n]].children=ae(l.data.content)}t=t[e[n]].children}return N((()=>{H(!1),F(!1),M("")})),le.release(),Object.values(t)},[oe,se]=o([]);s((()=>{ce(R()).then((e=>se(e)))}));const de=()=>{ce(R()).then((e=>se(e)))};de();const ue=(e,r)=>{N((()=>{ne(""),X(e),void 0!==r&&Z(r)}))};return d(k,{spacing:"$2",w:"$full",get children(){return[d(u,{pl:"$2",pr:"$2",w:"$full",get children(){return[d(g,{get children(){return d(h,{get currentPage(){return 0===R().length},"on:click":()=>V([]),children:"."})}}),d(p,{get each(){return R()},children:(e,r)=>d(g,{get children(){return[d(m,{}),d(h,{get currentPage(){return R().length===r()+1},"on:click":()=>V(R().slice(0,r()+1)),children:e})]}})})]}}),d(w,{get children(){return[d(f,{get when(){return""!==I()},get children(){return d(b,{get msg(){return I()},disableColor:!0})}}),d(f,{get when(){return D()},get children(){return d(T,{get title(){return e("home.toolbar.archive.input_password")},password:()=>O,setPassword:e=>O=e,enterCallback:()=>de(),get children(){return d(y,{get when(){return E()},get children(){return d(x,{color:"$danger9",get children(){return e("home.toolbar.archive.incorrect_password")}})}})}})}}),d(f,{get when(){return j((()=>!D()))()&&""===I()},get children(){return d($,{get loading(){return A()},get children(){return d(k,{class:"list",w:"$full",spacing:"$1",get children(){return[d(J,{sortCallback:ue,disableCheckbox:!0}),d(p,{get each(){return(()=>{let e=oe();W()&&(e=e.sort(((e,r)=>(Y()?-1:1)*U(e[W()],r[W()]))));let r=re();if(""!==r){let t=[],n=[];e.forEach((e=>(e.is_dir?t:n).push(e))),e="front"===r?t.concat(n):n.concat(t)}return e})()},children:(e,r)=>{let t,n=(R().length>0?"/"+R().join("/"):"")+"/"+e.name;return e.is_dir||(t=q+"?inner="+_(n,!0),""!==O&&(t=t+"&pass="+encodeURIComponent(O)),""!==L&&(t=t+"&sign="+L)),d(ee,{obj:e,get index(){return r()},jumpCallback:()=>V(R().concat(e.name)),innerPath:n,url:t,pass:O})}}),d(te,{})]}})}})}})]}}),d(y,{get when(){return""!==K()},get children(){return[d(v,{}),d(x,{w:"$full",pl:"$1",pr:"$1",get children(){return K()}})]}})]}})}))}}}));
